(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"07de":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card",staticStyle:{position:"relative"}},[a("q-card-section",{staticClass:"bg-secondary text-white text-center"},[a("div",{staticClass:"text-h6"},[e._v(e._s(e.translate("PROJECT.NAME")))]),a("q-tabs",{staticClass:"text-white",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"login",icon:"login",label:"Login"}}),a("q-tab",{attrs:{name:"register",icon:"person_add",label:"Register"}})],1)],1),a("q-card-section",{staticClass:"bg-secondary text-white q-pa-none"},[a("q-tab-panels",{staticClass:"bg-secondary q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"login"}},[a("loginForm")],1),a("q-tab-panel",{attrs:{name:"register"}},[a("registrationForm")],1)],1)],1)],1)},s=[],n=a("310f"),l=a("5757");const o=a("20e6"),r=a("ea76").default;var c={name:"authForms",components:{loginForm:n["a"],registrationForm:l["a"]},props:{},async created(){this.extendedProjectName=o["PROJECTEXTENDED"]},data(){return{translate:r.translate,extendedProjectName:"",tab:"login",loggedin:!1,working:!1}},methods:{}},d=c,m=(a("3344"),a("2877")),u=a("f09f"),g=a("a370"),h=a("ddd8"),p=a("429b"),b=a("7460"),y=a("adad"),f=a("823b"),v=a("eebe"),w=a.n(v),q=Object(m["a"])(d,i,s,!1,null,"ac435e80",null);t["a"]=q.exports;w()(q,"components",{QCard:u["a"],QCardSection:g["a"],QSelect:h["a"],QTabs:p["a"],QTab:b["a"],QTabPanels:y["a"],QTabPanel:f["a"]})},"0830":function(e,t,a){e.exports=a.p+"img/src/assets/adventhymnals/csysteminfo.png"},"0a24":function(e,t,a){e.exports=a.p+"img/src/assets/gospelsounders/csysteminfo.png"},1326:function(e){e.exports=JSON.parse('{"English":"EN","Kiswalihi":"SWA"}')},"1b38":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"padding"},[e.loadingSomethingBigger?a("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),e.rightSideBarP&&e.organizationsSidebar?a("rightSideBar",{attrs:{main:e.mainLocal,objType:"organization"}}):e._e(),e.organizationsSidebar?e._e():a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Organizations"},on:{click:e.manageOrganizations}}),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:e.createOrganizationDialog,callback:function(t){e.createOrganizationDialog=t},expression:"createOrganizationDialog"}},[a("q-card",{staticClass:"q-ma-md"},[a("q-card-section",{staticClass:"bg-secondary text-white text-center"},[a("div",{staticClass:"text-h6"},[e._v("Create Organization")])]),a("q-card-section",{staticClass:"bg-secondary text-white"},[a("createOrganization",{attrs:{main:e.mainLocal,userId:e.userId}})],1)],1)],1),e.notOuterPage?e._e():a("breadcrumbs",{attrs:{links:e.links}}),a("q-table",{attrs:{grid:"","card-container-class":e.cardContainerClass,data:e.allOrganizations,columns:e.columns,title:"Organizations",filter:e.filter,"row-key":"name","hide-header":"","hide-bottom":"","rows-per-page-options":[0]},on:{"row-click":e.selectOrganization},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.listUserOrganizations()}}})],1),a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"add_circle",side:""},on:{click:function(t){e.createOrganizationDialog=!0}}})],1)]},proxy:!0},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},[a("q-card",{staticClass:"bg-primary",staticStyle:{height:"200px"}},[a("q-card-section",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"flex flex-center text-h6 bg-secondary q-mb-none q-pb-none full-height cursor-pointer q-hoverable",on:{click:function(a){return e.selectOrganization(t.row)}}},[a("strong",[e._v(e._s(t.row.organizationName))])]),a("q-btn",{staticClass:"text-white absolute-top-right q-ma-sm",attrs:{icon:"delete",color:"red"},on:{click:function(a){return e.deleteOrganization(t.row)}}}),a("q-btn",{staticClass:"text-white absolute-top-left q-ma-sm",attrs:{icon:"input",color:"secondary"},on:{click:function(a){return e.manageUsers(t.row)}}})],1)],1)]}}])})],1)},s=[],n=(a("ddb0"),a("5319"),a("cf57"),a("2cbd")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{ref:"createOrganizationForm",staticClass:"q-gutter-md text-white",on:{submit:e.createOrganization,reset:e.onReset}},[a("q-input",{attrs:{filled:"",type:"text",label:"Organization name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name for your organization"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.organizationName,callback:function(t){e.organizationName=t},expression:"organizationName"}}),a("div",[a("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1)],1)},o=[];const r=a("1712").to,c=a("20e6"),d=a("c2a1").default;var m={name:"createOrganization",components:{},props:["main","userId"],beforeDestroy(){this.main.loadingSomethingBigger=!1},async created(){d.setSettings({TBURL:c["TB_URL"]}),d.setSettings(c)},data(){return{organizationName:""}},methods:{submit(){this.$refs.createOrganizationForm.submit()},async createOrganization(){return d.setSettings({TBURL:c["TB_URL"]}),new Promise((async(e,t)=>{this.main.loadingSomethingBigger=!0;let a=this.userId||(await d.whoAmILocally()).userId,i=this.organizationName,[s,n]=await r(d.createOrganization({organizationName:i,userId:a}));if(this.main.loadingSomethingBigger=!1,s){s=s.msg||s.message||s.error||s;try{s=JSON.parse(s)}catch(l){}if("object"===typeof s){let e=Object.keys(s);s=s[e[0]]}return this.$q.notify({type:"negative",message:s}),e(!1)}this.$q.notify({type:"positive",message:`${i} created.`}),this.main.createOrganizationDialog=!1,this.main.listUserOrganizations()}))},onReset(){this.organizationName=null}}},u=m,g=a("2877"),h=a("0378"),p=a("27f9"),b=a("9c40"),y=a("eebe"),f=a.n(y),v=Object(g["a"])(u,l,o,!1,null,null,null),w=v.exports;f()(v,"components",{QForm:h["a"],QInput:p["a"],QBtn:b["a"]});const q=a("20e6"),S=a("c2a1").default,k=a("1712").to,C=a("6daa").default;var x={name:"organizationsPage",props:["notOuterPage","main","organizationsSidebar"],components:{breadcrumbs:n["a"],createOrganization:w,rightSideBar:()=>Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"4d6d"))},watch:{$route(e,t){this.setfilters(e.path)}},data(){return{userId:null,activeElement_:"",mainLocal:this,editted:!1,loadingSomething:!1,loadingSomethingBigger:!1,rightSideBarP:!1,createOrganizationDialog:!1,loaded:!0,links:[{label:"Settings",icon:"settings",to:"/system"},{label:("mine"===window.location.hash.split("/")[3]?"My":"All")+" Organizations",icon:"corporate_fare",to:"/"+window.location.hash.split("/").slice(1,4).join("/")}],checkedLoggedIn:!1,loggedIn:!1,listHck:[{name:"Users",icon:"settings",link:"/#/system/users",Authority:"Manage Users and Organizations",description:"Manage Users and Organizations"}],filter:"",columnsHck:[],columns:[{name:"organizationName",label:"Organization",field:"organizationName",sortable:!0},{name:"lastName",label:"Last Name",field:"lastName",sortable:!0},{name:"email",label:"Email",field:"email",sortable:!0}],numUsers:0,numSysAdmins:0,numActiveUsers:0,numInactiveUsers:0,numEnabledUsers:0,numDisabledusers:0,allOrganizations:[],selectedRow:{}}},async created(){this.setfilters(),S.setVue(this),S.setSettings({TBURL:q["TB_URL"]});let e=window.location.hash.replace(/^[#]*[\/]*/,"");if(e.match(/system\/users/)){this.gettingOrganizationFor="user";try{this.userId=this.main.selectedRow.userId}catch(s){}}else if(e.match(/system\/(organizations)\/([a-zA-Z0-9]+)/)){let t=e.match(/system\/organizations\/([a-zA-Z0-9\-]+)/),a=t[1];this.userId="mine"===a?(await S.whoAmILocally()).userId:"system"===a?null:a}await this.listUserOrganizations();let t,a,i=e.match(/(organizations)\/([0-9a-z-]+)$/);i&&"organizations"===i[1]&&(t=i[2]),t&&(this.allOrganizations.map((e=>{e.organizationId===t&&(a=e)})),a&&this.selectOrganization(a))},methods:{manageOrganizations(){window.location.assign(`/#/system/organizations/${this.main.selectedRow.userId}`)},manageUsers(e){let t="";t="user"===this.gettingOrganizationFor?`/#/system/organizations/${this.main.selectedRow.userId}/${e.organizationId}/users`:window.location.href+`/${e.organizationId}/users`,window.location.assign(t)},async deleteOrganization(e){let{organizationId:t,organizationName:a}=e;return new Promise((async(t,a)=>{let[i,s]=await k(C.confirm(this,`Are you sure you want to delete ${e.organizationName}?`,"Delete Organization"));return i?t(!1):(this.main.loadingSomething=!0,[i,s]=await k(S.deleteOrganization(e.organizationId)),this.main.loadingSomething=!1,i?(this.$q.notify({type:"negative",message:i.msg||i}),t(!1)):(this.$q.notify({type:"positive",message:`Organization ${e.organizationName} has been deleted.`}),void await this.listUserOrganizations()))}))},setfilters(e=!1){let t=(e||window.location.hash).replace(/[\/]*[#]*\//,"");switch(t){case"system/users":this.filters={},this.activeElement_="users",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"}];break;case"system/users/sys_admin":this.filters={authority:"SYS_ADMIN"},this.activeElement_="sys_admin",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Sys_Admins",icon:"settings",to:"/system/users/sys_admin"}];break;case"system/users/active":this.filters={isActive:!0},this.activeElement_="active",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Active",icon:"do_not_disturb_off",to:"/system/users/active"}];break;case"system/users/inactive":this.filters={isActive:!1},this.activeElement_="inactive",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Inactive",icon:"do_not_disturb_on",to:"/system/users/inactive"}];break;case"system/users/enabled":this.filters={enabled:!0},this.activeElement_="enabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Enabled",icon:"people",to:"/system/users/enabled"}];break;case"system/users/disabled":this.filters={enabled:!1},this.activeElement_="disabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Disabled",icon:"person_off",to:"/system/users/disabled"}];break}e&&this.listUserOrganizations()},async listUserOrganizations(){this.loadingSomethingBigger=!0;let e=this.userId,[t,a]=[];[t,a]=e?await k(S.listUserOrganizations(e)):await k(S.listAllOrganizations()),this.loadingSomethingBigger=!1,t||(this.allOrganizations=a||[],this.numUsers=this.allOrganizations.length,this.numSysAdmins=this.allOrganizations.filter((e=>"SYS_ADMIN"===e.authority)).length,this.numActiveUsers=this.allOrganizations.filter((e=>!0===e.isActive)).length,this.numInactiveUsers=this.allOrganizations.filter((e=>!1===e.isActive)).length,this.numEnabledUsers=this.allOrganizations.filter((e=>!0===e.enabled)).length,this.numDisabledusers=this.allOrganizations.filter((e=>!1===e.enabled)).length)},selectApplication(e){window.location.assign(e)},gotoPage(e){console.log(e),window.location.assign(e)},selectOrganization(e){this.notOuterPage?window.location.assign(`/#/system/organizations/${this.main.selectedRow.userId}/${e.organizationId}/users`):(this.selectedOrganization=e,this.selectedOrganizationName=e.organizationName,this.selectedOrganizationId=e.organizationId,this.selectedId="object"===typeof e.organizationId?e.id.organizationId:e.organizationId,this.rightSideBarP=!1,this.$nextTick((()=>this.rightSideBarP=!0)))}},computed:{activeElement(){return this.activeElement_},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},z=x,T=a("9989"),O=a("6b1d"),_=a("24e8"),I=a("f09f"),F=a("a370"),A=a("eaac"),R=a("0016"),E=a("714f"),Q=Object(g["a"])(z,i,s,!1,null,null,null);t["a"]=Q.exports;f()(Q,"components",{QPage:T["a"],QLinearProgress:O["a"],QBtn:b["a"],QDialog:_["a"],QCard:I["a"],QCardSection:F["a"],QTable:A["a"],QInput:p["a"],QIcon:R["a"]}),f()(Q,"directives",{Ripple:E["a"]})},"22aa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("facilitiesPage",{attrs:{facilitiesSidebar:!0}})},s=[],n=a("4618"),l={name:"facilities",props:["notOuterPage"],components:{facilitiesPage:n["a"]},watch:{$route(e,t){}},data(){return{}},async created(){},methods:{},computed:{}},o=l,r=a("2877"),c=a("9989"),d=a("6b1d"),m=a("24e8"),u=a("f09f"),g=a("a370"),h=a("eaac"),p=a("27f9"),b=a("0016"),y=a("9c40"),f=a("714f"),v=a("eebe"),w=a.n(v),q=Object(r["a"])(o,i,s,!1,null,null,null);t["default"]=q.exports;w()(q,"components",{QPage:c["a"],QLinearProgress:d["a"],QDialog:m["a"],QCard:u["a"],QCardSection:g["a"],QTable:h["a"],QInput:p["a"],QIcon:b["a"],QBtn:y["a"]}),w()(q,"directives",{Ripple:f["a"]})},"2a07":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-drawer",{ref:"drawer",staticClass:"bg-primary",attrs:{bordered:"",side:"right",width:e.rightSideBarSize,overlay:"",breakpoint:2,behavior:"desktop"},model:{value:e.adventHymnals.rightSidebarOpen,callback:function(t){e.$set(e.adventHymnals,"rightSidebarOpen",t)},expression:"adventHymnals.rightSidebarOpen"}},[a("q-layout",{staticClass:"shadow-2 rounded-borders",attrs:{view:"lHh Lpr lFf",container:""}},[a("q-page-container",[a("q-page",[e.adventHymnals.loading?a("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{staticClass:"bg-red",attrs:{flat:"",round:"",dense:"",icon:"arrow_back"},on:{click:e.closeSelf}}),e.gtBig?a("q-btn",{staticClass:"bg-green",attrs:{flat:"",round:"",dense:"",icon:"zoom_out_map"},on:{click:function(t){e.adventHymnals.sideBarMaximized=!e.adventHymnals.sideBarMaximized}}}):e._e(),e.gtBig?a("q-btn",{staticClass:"bg-green",attrs:{flat:"",round:"",dense:"",icon:"play_arrow"},on:{click:function(t){e.adventHymnals.sideBarMaximized=!e.adventHymnals.sideBarMaximized}}}):e._e(),a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md text-center",style:e.hymnFontSize},[a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.4em"}},[e._v(e._s(e.adventHymnals.selectedSong.hymnal.shortname)+"\n          ")]),a("span",{staticClass:"text-weight-bold q-pt-lg",staticStyle:{"font-size":"0.8em"}},[e._v(e._s(e.adventHymnals.selectedSong.showTitle))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v(e._s(e.adventHymnals.selectedSong.hymnal.name))])])],1),a("q-tabs",{attrs:{align:"left","no-caps":""},model:{value:e.adventHymnals.songTab,callback:function(t){e.$set(e.adventHymnals,"songTab",t)},expression:"adventHymnals.songTab"}},[a("q-tab",{attrs:{name:"text",label:"Text"}}),a("q-tab",{attrs:{name:"compare",label:"Compare"}}),a("q-tab",{attrs:{name:"sheet",label:"Sheet Music"}}),a("q-tab",{attrs:{name:"syllables",label:"Syllables"}})],1),a("q-tab-panels",{staticClass:"bg-accent q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.adventHymnals.songTab,callback:function(t){e.$set(e.adventHymnals,"songTab",t)},expression:"adventHymnals.songTab"}},[a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",attrs:{name:"text"}},[a("q-card",{staticClass:"text-center",attrs:{flat:""}},[a("q-card-section"),a("q-card-section",{style:e.fontSizeStr},[a("q-markdown",{attrs:{"show-copy":"","no-subscript":e.noSubscript,"no-superscript":e.noSubscript}},[e._v("\n|  |\n|:------:|\n|"+e._s(e.adventHymnals.selectedLyrics)+"|\n              ")])],1)],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"bottom-left",offset:[18,18]}},[a("q-fab",{attrs:{icon:"settings",fab:"",color:"secondary",direction:"up"}},[a("q-fab-action",{attrs:{color:"secondary",icon:"zoom_in",fab:""},on:{click:function(t){return e.fontSizeF(.25)}}}),a("q-fab-action",{attrs:{color:"secondary",icon:"crop_free",fab:""},on:{click:function(t){return e.fontSizeF()}}}),a("q-fab-action",{attrs:{color:"secondary",icon:"zoom_out",fab:""},on:{click:function(t){return e.fontSizeF(-.25)}}})],1)],1)],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",style:e.fontSizeStrCompare,attrs:{name:"compare"}},[e.adventHymnals.selectedComparisonStrs?a("q-markdown",{attrs:{"show-copy":""}},[e._v("\n|"+e._s(e.adventHymnals.selectedComparisons.map((function(e){return e[2]+"("+e[3]+") [#"+e[0]+"]("+e[4]+") |"})).join("<...>").replace(/<\.\.\.>/g,""))+"\n|"+e._s(e.adventHymnals.selectedComparisons.map((function(e){return":------:|"})).toString().replace(/,/g,""))+"\n"+e._s(e.adventHymnals.selectedComparisonStrs)+"\n\n\n              ")]):a("div",{staticClass:"q-ma-md"},[a("p",[e._v("We haven't found a similar song in other hymnals to compare with, or the record has not yet been created. (We really wish we could automate this work. But we still have to do it manually.)")]),a("p",[e._v("You can join our "),a("a",{attrs:{href:"http://t.me/adventHymnals",target:"_blank"}},[e._v("telegram group")]),e._v(" to help with this work. If the link fails to work (as it sometimes does), then the good old email could still be of good use:"),a("br")]),a("p",{staticClass:"text-center"},[a("a",{attrs:{href:"mailto:editor@gospelsounders.org"}},[e._v("editor@gospelsounders.org")])])]),a("div",[a("p",{staticClass:"text-center"},[e._v("\n                Todo: Add a means of filtering the hymnals to use for comparison.\n                ")])]),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"bottom-left",offset:[18,18]}},[a("q-fab",{attrs:{icon:"settings",fab:"",color:"secondary",direction:"up"}},[a("q-fab-action",{attrs:{color:"secondary",icon:"zoom_in",fab:""},on:{click:function(t){return e.fontSizeFCompare(.25)}}}),a("q-fab-action",{attrs:{color:"secondary",icon:"crop_free",fab:""},on:{click:function(t){return e.fontSizeFCompare()}}}),a("q-fab-action",{attrs:{color:"secondary",icon:"zoom_out",fab:""},on:{click:function(t){return e.fontSizeFCompare(-.25)}}})],1)],1)],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none bg-white",attrs:{name:"sheet"}},[a("q-page",[a("q-fab",{attrs:{icon:"list",fab:"",color:"secondary",direction:"down"}},e._l(e.adventHymnals.selectedSheets,(function(t,i){return a("q-fab-action",{key:t,attrs:{color:"secondary",icon:"zoom_out",fab:"",label:i},on:{click:function(a){return e.adventHymnals.openSheet(i,t)}}})})),1),"png"===e.adventHymnals.sheetsExt?a("img",{attrs:{width:"100%",src:e.adventHymnals.sheetsRoot+"/"+e.adventHymnals.currentSong.number+".png"}}):e._e(),"pdf"===e.adventHymnals.sheetsExt?a("q-pdfviewer",{staticStyle:{height:"100%"},attrs:{src:e.adventHymnals.sheetsRoot+"/"+e.adventHymnals.currentSong.number+".pdf",type:"pdfjs","content-class":" container absolute-top","inner-content-class":"absolute container"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}):e._e(),"html"===e.adventHymnals.sheetsExt?a("iframe",{staticClass:"container absolute-top",attrs:{srcdoc:""+e.adventHymnals.htmlSheet}}):e._e()],1)],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",attrs:{name:"syllables"}},[a("q-page",{attrs:{id:"synthesizerContainer"}},[a("div",{attrs:{id:"wrapper"}},[a("section",{staticClass:"section bright",attrs:{id:"demo_section"}},[a("div",{staticClass:"section__contents websynthvdemo",staticStyle:{"background-color":"#cccccc"},attrs:{id:"websynthv-div"}},[a("div",[a("div",{attrs:{id:"websynthv-status"}},[e._v("Downloading...")]),a("div",[a("progress",{attrs:{value:"0",max:"100",id:"websynthv-progress",hidden:"1"}})]),a("div",{attrs:{id:"websynthv-notice"}},[e._v("You need Chrome (version 77 and up) to view the content.")])])]),a("div",{staticClass:"section__contents"},[a("input",{staticStyle:{display:"block","margin-left":"auto","margin-right":"auto","margin-bottom":"10px"},attrs:{type:"file",id:"websynthv-input",accept:".s5p,.mid,.midi"}})])])]),a("script",{attrs:{type:"application/javascript",src:"common/js/common.js"}}),a("script",{attrs:{type:"application/javascript",src:"synthesizer/websynthv-loader.js"}}),a("script",{attrs:{type:"application/javascript",async:"",src:"synthesizer/SynthesizerVStudio.js"}})])],1)],1)],1),a("q-page-scroller",{attrs:{position:"bottom-right","scroll-offset":0,offset:[18,18]}},[a("q-btn",{attrs:{fab:"",icon:"keyboard_arrow_up",color:"secondary"}})],1)],1)],1)],1)],1)},s=[],n={name:"hymnalRightSideBar",props:["adventHymnals"],beforeDestroy(){window.removeEventListener("keyup",this.adventHymnals.songNavigation)},created(){setInterval((()=>{console.log(window.juce_mouseCallback);try{window.juce_mouseCallback("down",191,116,0,!1,!1,!1)}catch(e){}}),2e3);this.adventHymnals.downloadMp3(),window.addEventListener("keyup",this.adventHymnals.songNavigation);let e=window.localStorage.getItem("AH-fontSize");e?this.fontSize=parseFloat(e):e=this.$q.screen.lt.xs?this.fontSize=.5:this.$q.screen.lt.sm?this.fontSize=1.5:(this.$q.screen.lt.md,this.fontSize=3);let t=window.localStorage.getItem("AH-fontSizeCompare");t?this.fontSizeCompare=parseFloat(t):t=this.$q.screen.lt.xs?this.fontSize=.5:this.$q.screen.lt.sm?this.fontSize=1.5:(this.$q.screen.lt.md,this.fontSize=3),this.initFontSize(),this.gtBig=!this.$q.screen.lt.xs&&(!this.$q.screen.lt.sm&&!this.$q.screen.lt.md),this.processTab()},components:{},data(){return{noSubscript:!1,show:!0,gtBig:!1,lang:"",langs:["abc","def"],fontSizeStr:"font-size:1em;",fontSizeStrCompare:"font-size:1em;",fontSize:1,fontSizeCompare:1}},methods:{processTab(){let e=this.adventHymnals.songTab;"compare"===e&&this.adventHymnals.loadCompare(),"sheet"===e&&this.adventHymnals.fetchHtmlSheet()},closeSelf(){this.adventHymnals.rightSidebarOpen=!1},initFontSize(){let e=window.localStorage.getItem("AH-fontSize");parseFloat(e).toString()===e&&(this.fontSize=e),this.fontSizeStr=`font-size:${this.fontSize}em;`,this.fontSizeStrCompare=`font-size:${this.fontSizeCompare}em;`},fontSizeF(e){e?this.fontSize+=e:this.fontSize=1,window.localStorage.setItem("AH-fontSize",this.fontSize),this.fontSizeStr=`font-size:${this.fontSize}em;`},fontSizeFCompare(e){e?this.fontSizeCompare+=e:this.fontSizeCompare=1,window.localStorage.setItem("AH-fontSizeCompare",this.fontSizeCompare),this.fontSizeStrCompare=`font-size:${this.fontSizeCompare}em;`}},watch:{"adventHymnals.songTab"(e){this.processTab()}},computed:{hymnFontSize(){return this.$q.screen.lt.xs?"font-size:0.5em; font-weight: bold;":this.$q.screen.lt.sm?"font-size:1.5em; font-weight: bold;":(this.$q.screen.lt.md,"font-size:3em; font-weight: bold;")},rightSideBarSize(){return this.adventHymnals.sideBarMaximized||this.$q.screen.lt.xs||this.$q.screen.lt.sm||this.$q.screen.lt.md?document.getElementsByTagName("body")[0].clientWidth:.75*document.getElementsByTagName("body")[0].clientWidth}}},l=n,o=(a("a852"),a("2877")),r=a("9404"),c=a("4d5a"),d=a("09e3"),m=a("9989"),u=a("6b1d"),g=a("65c6"),h=a("9c40"),p=a("6ac5"),b=a("429b"),y=a("7460"),f=a("adad"),v=a("823b"),w=a("f09f"),q=a("a370"),S=a("05c0"),k=a("de5e"),C=a("c294"),x=a("72db"),z=a("5096"),T=a("24e8"),O=a("2c91"),_=a("7f67"),I=a("eebe"),F=a.n(I),A=Object(o["a"])(l,i,s,!1,null,null,null);t["a"]=A.exports;F()(A,"components",{QDrawer:r["a"],QLayout:c["a"],QPageContainer:d["a"],QPage:m["a"],QLinearProgress:u["a"],QToolbar:g["a"],QBtn:h["a"],QToolbarTitle:p["a"],QTabs:b["a"],QTab:y["a"],QTabPanels:f["a"],QTabPanel:v["a"],QCard:w["a"],QCardSection:q["a"],QTooltip:S["a"],QPageSticky:k["a"],QFab:C["a"],QFabAction:x["a"],QPageScroller:z["a"],QDialog:T["a"],QSpace:O["a"]}),F()(A,"directives",{ClosePopup:_["a"]})},"2cbd":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{icon:"home",to:"/home"}}),e._l(e.links,(function(e){return a("q-breadcrumbs-el",{key:e.link,attrs:{label:e.label,icon:e.icon,to:e.to}})}))],2)],1)},s=[],n={name:"breadcrumbs",props:{links:{type:Array}},data(){return{}},methods:{}},l=n,o=a("2877"),r=a("ead5"),c=a("079e"),d=a("eebe"),m=a.n(d),u=Object(o["a"])(l,i,s,!1,null,null,null);t["a"]=u.exports;m()(u,"components",{QBreadcrumbs:r["a"],QBreadcrumbsEl:c["a"]})},"310f":function(e,t,a){"use strict";var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("q-form",{staticClass:"text-white bg-secondary",on:{submit:t.onSubmit,reset:t.onReset}},[i("q-input",{attrs:{filled:"",type:"email",label:t.translate("FIELDS.EMAIL"),hint:t.translate("FIELDS.EMAIL"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter your email address"},function(t){return e.isValidEmail()||"Invalid email address"}]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("q-input",{attrs:{filled:"",type:"password",label:"Password","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Please enter your password"}],"error-message":t.passwordErrorMessage},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),i("div",{staticClass:"q-pa-md"},[i("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),i("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1)],1)},s=[],n=(a("ddb0"),a("cf57"));const l=a("1712").to,o=a("20e6"),r=a("c2a1").default,c=a("ea76").default;var d={name:"loginForm",data(){return{translate:c.translate,email:"",password:"",passwordErrorMessage:""}},methods:{isValidEmail(){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(this.email)||"Invalid email"},showCustom(e=""){const t=this.$q.dialog({title:e,message:"",progress:{spinner:n["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),t.hide())}),500)},async onSubmit(){r.setSettings({TBURL:o["TB_URL"]});o["TB_URL"];let e={email:this.email,password:this.password};this.working=!0,this.showCustom();let[t,a]=await l(r.login(e));if(this.working=!1,t)return this.loggedin=!1,this.$q.notify({type:"negative",message:t.error||t.message||"failed to log in"}),this.password="",void(this.passwordErrorMessage=t.error||t.message||"wrong email/password");this.$q.notify({type:"positive",message:"log in successful"});r.getDefaultPageAfterLogin();window.location.assign(r.getDefaultPageAfterLogin())},onReset(){this.email=null,this.password=null}}},m=d,u=a("2877"),g=a("0378"),h=a("27f9"),p=a("9c40"),b=a("eebe"),y=a.n(b),f=Object(u["a"])(m,i,s,!1,null,null,null);t["a"]=f.exports;y()(f,"components",{QForm:g["a"],QInput:h["a"],QBtn:p["a"]})},3344:function(e,t,a){"use strict";a("853b")},3583:function(e){e.exports=JSON.parse('{"PROJECT":{"NAME":{"EN":"AdventHymnals","SWA":"AdventHymnals"}},"FIELDS":{"EMAIL":{"EN":"email","SWA":"anwani"}}}')},"36ef":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"padding q-pa-none"},[!1!==e.adventHymnals.openHymnalSection?a("div",[a("q-tabs",{staticClass:"bg-accent",attrs:{align:"left","no-caps":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"indices"}},[a("q-btn",{attrs:{flat:"",dense:"",icon:"more_vert","aria-label":"Indices",label:e.adventHymnals.selectedHymnalObj.abbvr,"no-caps":""}},[a("q-menu",{attrs:{"auto-close":"","content-style":{backgroundColor:"#fff",color:"#737373"}}},[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{attrs:{clickable:""},on:{click:function(t){return e.adventHymnals.selectAnotherHymnal("All")}}},[a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{color:"primary",name:"library_books"}})],1),a("q-item-section",[e._v("All Hymnals")])],1),e._l(e.adventHymnals.hymnals.filter((function(t){return t.abbvr!==e.adventHymnals.selectedHymnalObj.abbvr&&void 0!==t.link})),(function(t){return a("q-item",{key:t.name,attrs:{clickable:""},on:{click:function(a){return e.adventHymnals.selectAnotherHymnal(t.abbvr)}}},[a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{color:"primary",name:"music_note"}})],1),a("q-item-section",[e._v(e._s(t.abbvr))])],1)}))],2)],1)],1)],1),a("q-tab",{attrs:{name:"info",label:"Info"}}),a("q-tab",{attrs:{name:"about",label:"About"}}),a("q-tab",{attrs:{name:"download",label:"Print"}})],1),a("q-tab-panels",{staticClass:"bg-transparent q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",attrs:{name:"indices"}},[a("q-tabs",{staticClass:"bg-secondary",attrs:{align:"left","no-caps":""},model:{value:e.adventHymnals.tab,callback:function(t){e.$set(e.adventHymnals,"tab",t)},expression:"adventHymnals.tab"}},[a("q-tab",{attrs:{name:"titles",label:"Titles"}}),a("q-tab",{attrs:{name:"tunes",label:"Tunes"}}),a("q-tab",{attrs:{name:"poets",label:"Poets"}})],1),a("q-tab-panels",{staticClass:"bg-transparent q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.adventHymnals.tab,callback:function(t){e.$set(e.adventHymnals,"tab",t)},expression:"adventHymnals.tab"}},[a("q-tab-panel",{staticClass:"q-ma-none q-pa-none q-markdown--table",attrs:{name:"titles"}},[a("q-table",{staticClass:"bg-transparent col hymnalSection q-pa-md",attrs:{data:e.adventHymnals.allHymnalsObj[e.adventHymnals.selectedHymnalObj.abbvr].indices,columns:"All"===e.adventHymnals.selectedHymnalObj.abbvr?e.hColumn.concat(e.titlesColumns):e.titlesColumns,"visible-columns":[],"filter-method":e.adventHymnals.filterSongFunc,filter:e.filterSong},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{staticClass:"col-12",attrs:{dense:"",debounce:"300",placeholder:"Search Title/First Line"},on:{keyup:function(t){e.adventHymnals.filterBy=!1}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filterSong,callback:function(t){e.filterSong=t},expression:"filterSong"}})]},proxy:!0},{key:"body-cell-h",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.adventHymnals.selectSong(t.row,t.row)}}},[e._v("\n                    "+e._s(t.row.h)+"\n                  ")])]}},{key:"body-cell-number",fn:function(t){return[e.adventHymnals.selectedHymnalObj.separateParts?a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.adventHymnals.selectSong(t.row,t.row)}}},[e._v("\n                   "+e._s(t.row.partNumber)+" "+e._s(t.row.part)+"\n                  ")]):a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.adventHymnals.selectSong(t.row,t.row)}}},[e._v("\n                   "+e._s(t.row.number)+"\n                  ")])]}},{key:"body-cell-title",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.adventHymnals.selectSong(t.row,t.row)}}},[e._v("\n                   "+e._s(t.row.title)+"\n                  ")])]}},{key:"body-cell-key",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.setFilter(t.row.key,"key")}}},[e._v("\n                    "+e._s(t.row.key)+"\n                  ")])]}}],null,!1,1364570169)})],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none q-markdown--table",attrs:{name:"tunes"}},[a("q-table",{staticClass:"bg-transparent col hymnalSection q-pa-md",attrs:{data:e.adventHymnals.allHymnalsObj[e.adventHymnals.selectedHymnalObj.abbvr].indices,columns:"All"===e.adventHymnals.selectedHymnalObj.abbvr?e.hColumn.concat(e.tunesColumns):e.tunesColumns,"filter-method":e.adventHymnals.filterSongFunc,filter:e.filterSong},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{staticClass:"col-12",attrs:{dense:"",debounce:"300",placeholder:"Search Tune"},on:{keyup:function(t){e.adventHymnals.filterBy=!1}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filterSong,callback:function(t){e.filterSong=t},expression:"filterSong"}})]},proxy:!0},{key:"body-cell-tune",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.setFilter(t.row.tune,"tune")}}},[e._v("\n                    "+e._s(t.row.tune)+"\n                  ")])]}},{key:"body-cell-metrical",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.setFilter(t.row.metrical,"metrical")}}},[e._v("\n                    "+e._s(t.row.metrical)+"\n                  ")])]}}],null,!1,380875189)})],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",attrs:{name:"poets"}},[a("q-table",{staticClass:"bg-transparent col hymnalSection q-pa-md",attrs:{data:e.adventHymnals.allHymnalsObj[e.adventHymnals.selectedHymnalObj.abbvr].indices,columns:"All"===e.adventHymnals.selectedHymnalObj.abbvr?e.hColumn.concat(e.poetColumns):e.poetColumns,"filter-method":e.adventHymnals.filterSongFunc,filter:e.filterSong},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{staticClass:"col-12",attrs:{dense:"",debounce:"300",placeholder:"Search Poet"},on:{keyup:function(t){e.adventHymnals.filterBy=!1}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:e.filterSong,callback:function(t){e.filterSong=t},expression:"filterSong"}})]},proxy:!0},{key:"body-cell-poet",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.setFilter(t.row.poet,"poet")}}},[e._v("\n                    "+e._s(t.row.poet)+"\n                  ")])]}},{key:"body-cell-year",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.setFilter(t.row.year,"year")}}},[e._v("\n                    "+e._s(t.row.year)+"\n                  ")])]}}],null,!1,817558289)})],1)],1)],1),a("q-tab-panel",{staticClass:"q-ma-none q-pt-none q-pl-sm q-pr-sm",attrs:{name:"info"}},[a("q-markdown",{staticClass:"absolute-top"},[e._v("\n| | |\n|------| -----------|\n| Name|"+e._s(e.adventHymnals.selectedHymnalObj.name)+" |\n|Abbreviation|"+e._s(e.adventHymnals.selectedHymnalObj.abbvr)+" |\n| Year |"+e._s(e.adventHymnals.selectedHymnalObj.year)+" |\n| Language |"+e._s(e.adventHymnals.selectedHymnalObj.longLangName)+" |\n| Compiler |"+e._s(e.adventHymnals.selectedHymnalObj.compiler)+" |\n| No. Songs |"+e._s(e.adventHymnals.selectedHymnalObj.numSongs)+" |\n| Available |"+e._s(void 0!==e.adventHymnals.selectedHymnalObjlink?"Yes":"No")+"|\n          ")])],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-sm",attrs:{name:"about"}},[!1!==e.adventHymnals.preface?a("q-markdown",{staticClass:"absolute-top"},[e._v("\n            "+e._s(e.adventHymnals.preface)+"\n          ")]):e._e(),!1===e.adventHymnals.preface?a("q-page",[a("div",{staticClass:"absolute-center text-center"},[a("p",{staticClass:"text-center"},[e._v("\n                Maybe its our fault that there is still nothing here. But we are\n                very hard at work, on it.\n              ")])])]):e._e()],1),a("q-tab-panel",{staticClass:"q-ma-none q-pa-none",attrs:{name:"download"}},[e.adventHymnals.printData?a("q-markdown",{attrs:{"show-copy":""}},[e._v("\n          "+e._s(e.adventHymnals.printData)+"\n          ")]):a("q-linear-progress",{attrs:{value:e.adventHymnals.printDownloadProgress,size:"30px",color:"negative"}},[a("div",{staticClass:"absolute-full flex flex-center"},[a("q-badge",{attrs:{color:"secondary","text-color":"black",label:(100*e.adventHymnals.printDownloadProgress).toFixed(2)+"%"}})],1)]),a("q-dialog",{attrs:{seamless:"",position:"bottom"},model:{value:e.seamless,callback:function(t){e.seamless=t},expression:"seamless"}},[a("q-card",{staticClass:"bg-secondary text-white"},[a("q-card-section",{staticClass:"row items-center no-wrap text-white"},[a("p",[e._v(" This will just give you a rudimentary way of copying all the hymns available in a given hymnal. You will have to do the rest of the editing by yourself until we are able to provide a well formatted hymnal at a later time."),a("br"),e._v("\n          You can consider "),a("a",{attrs:{href:"/donate"}},[e._v("donating")]),e._v(" so we can have resources to continue the work that is remaining.\n         ")])]),a("q-card-actions",[a("q-btn",{attrs:{icon:"close",label:"close"},on:{click:function(t){e.seamless=!1}}})],1)],1)],1)],1)],1)],1):e._e(),e.adventHymnals.openHymnalSection?e._e():a("q-table",{attrs:{grid:"","card-container-class":e.cardContainerClass,data:e.adventHymnals.hymnals,columns:e.adventHymnals.hymnalColumns,title:Object.values(e.adventHymnals.hymnals).map((function(e){return parseInt(e.numSongs)})).reduce((function(e,t){return e+t||0}),0)+" songs in "+Object.keys(e.adventHymnals.languages).length+" languages ",filter:e.adventHymnals.hymnalFilter,"row-key":"name","hide-header":"","hide-bottom":"","rows-per-page-options":[0]},on:{"row-click":e.adventHymnals.selectHymnal},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("div",{staticClass:"flex"},[a("q-select",{attrs:{filled:"",options:Object.values(e.adventHymnals.languagesToSelect).map((function(e){return e.name})),label:"language"},on:{input:e.adventHymnals.selectLanguage},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("div",[e._v("\n                "+e._s(Object.values(e.adventHymnals.hymnals).map((function(e){return parseInt(e.numSongs)})).reduce((function(e,t){return e+t||0}),0))+"\n                songs in\n              ")])]},proxy:!0}],null,!1,3411954905),model:{value:e.adventHymnals.language,callback:function(t){e.$set(e.adventHymnals,"language",t)},expression:"adventHymnals.language"}}),a("q-select",{attrs:{filled:"",options:Object.values(e.adventHymnals.hymnals).map((function(e){return e.name})).sort((function(e,t){return e>t?-1:0})).concat(e.adventHymnals.hymnalToSelect).reverse(),label:"Hymnal"},on:{input:e.adventHymnals.selectHymnal},model:{value:e.adventHymnals.hymnalToSelect,callback:function(t){e.$set(e.adventHymnals,"hymnalToSelect",t)},expression:"adventHymnals.hymnalToSelect"}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.adventHymnals.hymnalFilter,callback:function(t){e.$set(e.adventHymnals,"hymnalFilter",t)},expression:"adventHymnals.hymnalFilter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.adventHymnals.fetchHymnals()}}})],1)]},proxy:!0},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition cursor-pointer",style:t.selected?"z-index:2;height:400px;":"transform: scale(0.99);height:400px;",on:{click:function(a){return e.adventHymnals.selectHymnal(t.row.siteName||t.row.name)}}},[a("q-card",{class:"bg-secondary text-white full-width"},[a("q-btn",{ref:"expand-"+t.row.name,staticClass:"absolute-top-right q-ma-sm",class:t.selected?"bg-red":"bg-secondary",staticStyle:{"z-index":"5"},attrs:{dense:"",icon:t.selected?"close":"fullscreen","aria-label":"Menu"}}),a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"absolute-top-left q-ma-sm text-black text-bold text-italic",staticStyle:{opacity:"0.5"}},[e._v("\n                "+e._s(t.row.lang)+"\n              ")]),e._v("\n              "+e._s(t.row.siteName||t.row.name)),a("br"),e._v("\n              "+e._s(t.row.year)+"\n            ")]),a("q-separator"),a("q-card-section",{staticClass:"q-ma-none q-pa-none bg-accent text-black full-width",staticStyle:{position:"relative"}},[a("q-markdown",{staticClass:"absolute-top"},[e._v("\n| | |\n| ------| -----------|\n| Name| "+e._s(t.row.name)+" |\n|Abbreviation| "+e._s(t.row.abbvr)+" |\n| Year |"+e._s(t.row.year)+" |\n| Language |"+e._s(t.row.longLangName)+" |\n| Compiler |"+e._s(t.row.compiler)+" |\n| No. Songs |"+e._s(t.row.numSongs)+" |\n| Available |"+e._s(void 0!==t.row.link?"Yes":"No")+" |\n              ")])],1)],1)],1)]}}],null,!1,2776702420)}),a("q-page-scroller",{attrs:{position:"bottom-right","scroll-offset":150,offset:[18,18]}},[a("q-btn",{attrs:{fab:"",icon:"keyboard_arrow_up",color:"secondary"}})],1),e.adventHymnals.hymnSidebar?a("hymnalRightSideBar",{attrs:{adventHymnals:e.adventHymnals}}):e._e()],1)},s=[],n=a("2a07"),l={name:"hymnal",components:{hymnalRightSideBar:n["a"]},props:["adventHymnals","sideBarOpener"],data(){return{seamless:!1,tab:"indices",filterSong:"",tabs:this.adventHymnals.hymnalActions,indexTab:"titles",hColumn:[{required:!0,name:"h",label:"Hymnal",sortable:!0,field:"h"}],titlesColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"title",required:!0,label:"Title",sortable:!0,field:"title",align:"left"},{name:"key",required:!0,label:"Key",sortable:!0,field:"key",align:"left"}],tunesColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"tune",required:!0,label:"Tune",sortable:!0,field:"tune",align:"left"},{name:"metrical",required:!0,label:"Metrical Pattern",sortable:!0,field:"metrical"}],poetColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"poet",required:!0,label:"Poet",sortable:!0,field:"poet",align:"left"},{name:"year",required:!0,label:"Year",sortable:!0,field:"year"}]}},async created(){this.adventHymnals.processPathNext=!0,await this.adventHymnals.fetchHymnals()},watch:{filterSong(e){this.adventHymnals.filterSong(e,this)},tab(e){"download"===e&&this.adventHymnals.downloadHymnal()}},methods:{onExtend(e){},setFilter(e,t){this.filterSong=e,console.log(t),console.log(t),console.log(t,e),this.adventHymnals.filterBy=t}},computed:{rightSideBarSize(){return this.$q.screen.lt.xs||this.$q.screen.lt.sm||this.$q.screen.lt.md?document.getElementsByTagName("body")[0].clientWidth:.75*document.getElementsByTagName("body")[0].clientWidth},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},o=l,r=(a("a1f4"),a("2877")),c=a("9989"),d=a("429b"),m=a("7460"),u=a("9c40"),g=a("4e73"),h=a("1c1c"),p=a("66e5"),b=a("4074"),y=a("0016"),f=a("adad"),v=a("823b"),w=a("eaac"),q=a("27f9"),S=a("db86"),k=a("6b1d"),C=a("58a81"),x=a("24e8"),z=a("f09f"),T=a("a370"),O=a("4b7e"),_=a("ddd8"),I=a("eb85"),F=a("5096"),A=a("eebe"),R=a.n(A),E=Object(r["a"])(o,i,s,!1,null,null,null);t["default"]=E.exports;R()(E,"components",{QPage:c["a"],QTabs:d["a"],QTab:m["a"],QBtn:u["a"],QMenu:g["a"],QList:h["a"],QItem:p["a"],QItemSection:b["a"],QIcon:y["a"],QTabPanels:f["a"],QTabPanel:v["a"],QTable:w["a"],QInput:q["a"],QTd:S["a"],QLinearProgress:k["a"],QBadge:C["a"],QDialog:x["a"],QCard:z["a"],QCardSection:T["a"],QCardActions:O["a"],QSelect:_["a"],QSeparator:I["a"],QPageScroller:F["a"]})},"37c0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-item",{attrs:{clickable:"",tag:"a",href:e.link}},[e.icon?a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:e.icon}})],1):e._e(),a("q-item-section",[a("q-item-label",[e._v(e._s(e.title))]),e.caption?a("q-item-label",{staticClass:"text-accent",attrs:{caption:""}},[e._v("\n      "+e._s(e.caption)+"\n    ")]):e._e()],1)],1)},s=[],n={name:"EssentialLink",props:["title","link","caption","icon"]},l=n,o=a("2877"),r=a("66e5"),c=a("4074"),d=a("0016"),m=a("0170"),u=a("eebe"),g=a.n(u),h=Object(o["a"])(l,i,s,!1,null,null,null);t["a"]=h.exports;g()(h,"components",{QItem:r["a"],QItemSection:c["a"],QIcon:d["a"],QItemLabel:m["a"]})},"3ca2":function(e){e.exports=JSON.parse('{"tmp":{"EN":" ","SWA":" "}}')},4618:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"padding"},[e.loadingSomethingBigger?a("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),e.rightSideBarP?a("rightSideBar",{attrs:{main:e.mainLocal,objType:"facility"}}):e._e(),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:e.createFacilityDialog,callback:function(t){e.createFacilityDialog=t},expression:"createFacilityDialog"}},[a("q-card",{staticClass:"q-ma-md"},[a("q-card-section",{staticClass:"bg-secondary text-white text-center"},[a("div",{staticClass:"text-h6"},[e._v("Create Facility")])]),a("q-card-section",{staticClass:"bg-secondary text-white"},[a("createFacility",{attrs:{main:e.mainLocal,organizationId:e.organizationId}})],1)],1)],1),e.organizationId||e.isUserPage?e._e():a("breadcrumbs",{attrs:{links:e.links}}),a("q-tabs",{attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"facilities",label:"Facilities"}}),a("q-tab",{attrs:{name:"map",label:"Map"}})],1),a("q-tab-panels",{staticClass:"q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"facilities"}},[a("q-table",{attrs:{grid:"","card-container-class":e.cardContainerClass,data:e.allFacilities,columns:e.columns,title:"Facilities",filter:e.filter,"row-key":"name","hide-header":"","hide-bottom":"","rows-per-page-options":[0]},on:{"row-click":e.selectFacility},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.listOrganizationFacilities()}}})],1),e.organizationId?a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"add_circle",side:""},on:{click:function(t){e.createFacilityDialog=!0}}})],1):e._e()]},proxy:!0},{key:"item",fn:function(t){return[a("div",{staticClass:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},[a("q-card",{staticClass:"bg-primary",staticStyle:{height:"200px"}},[a("q-card-section",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"flex flex-center text-h6 bg-primary q-mb-none q-pb-none full-height cursor-pointer q-hoverable",on:{click:function(a){return e.selectFacility(t.row)}}},[a("strong",[e._v(e._s(t.row.facilityName))])]),a("q-btn",{staticClass:"text-white absolute-top-right q-ma-sm",attrs:{icon:"delete",color:"red"},on:{click:function(a){return e.deleteFacility(t.row)}}}),a("q-btn",{staticClass:"text-white absolute-top-left q-ma-sm",attrs:{icon:"input",color:"secondary"},on:{click:function(a){return e.manageFacilities(t.row)}}})],1)],1)]}}])})],1),a("q-tab-panel",{attrs:{name:"map"}},[a("q-page",{staticClass:"full-height full-width"},[a("div",{staticClass:"full-height full-width",staticStyle:{height:"100%",position:"absolute"}},[a("l-map",{ref:"lmap",staticClass:"full-width full-height",staticStyle:{width:"100%",height:"100%"},attrs:{zoom:e.zoom,center:e.center}},[a("l-tile-layer",{attrs:{url:e.url}}),e._l(e.allFacilities,(function(t){return a("l-marker",{key:t.facilityId,ref:"marker",refInFor:!0,attrs:{"lat-lng":t.location.coordinates,draggable:!0},on:{click:function(a){return e.selectFacility(t)}}},[a("l-popup",{staticClass:"q-pa-none q-ma-none"},[e._v("\n                "+e._s(t.facilityName||"Facility")+"\n                ")])],1)}))],2)],1)])],1)],1)],1)},s=[],n=(a("ddb0"),a("5319"),a("cf57"),a("2cbd")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-form",{ref:"createFacilityForm",staticClass:"q-gutter-md text-white",on:{submit:e.createFacility,reset:e.onReset}},[a("q-input",{attrs:{filled:"",type:"text",label:"Facility name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name for your facility"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.facilityName,callback:function(t){e.facilityName=t},expression:"facilityName"}}),a("q-input",{attrs:{filled:"",type:"text",label:"location","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a location for your facility"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-btn",{attrs:{icon:"place"},on:{click:function(t){e.mapDialog=!0}}})]},proxy:!0}]),model:{value:e.centerString,callback:function(t){e.centerString=t},expression:"centerString"}}),a("div",[a("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1)],1),a("q-dialog",{attrs:{maximized:!1,"transition-show":"scale","transition-hide":"scale"},model:{value:e.mapDialog,callback:function(t){e.mapDialog=t},expression:"mapDialog"}},[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("l-map",{ref:"lmap",staticClass:"full-width",staticStyle:{width:"100%",height:"100%"},attrs:{zoom:e.zoom,center:e.center},on:{ready:e.lmapReady}},[a("l-tile-layer",{attrs:{url:e.url}}),a("l-marker",{ref:"marker",attrs:{"lat-lng":e.center,draggable:!0}},[a("l-popup",{staticClass:"q-pa-none q-ma-none"},[a("q-card",{staticClass:"q-pa-none q-ma-none",attrs:{flat:""}},[a("q-card-section",[e._v("\n                "+e._s(e.facilityName||"Facility")+" Location\n              ")]),a("q-card-section",[e._v("\n                "+e._s(e.centerString)+"\n              ")])],1)],1)],1)],1)],1)])],1)},o=[],r=a("e11e"),c=a.n(r),d=a("2699"),m=a("a40a"),u=a("4e2b6"),g=a("fbba"),h=a("f60f");a("6cc5");const p=a("1712").to,b=a("20e6"),y=a("c2a1").default;delete c.a.Icon.Default.prototype._getIconUrl,c.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")});var f={name:"createFacility",components:{LMap:d["a"],LTileLayer:m["a"],LMarker:u["a"],LIcon:g["a"],LPopup:h["a"]},props:["main","organizationId"],beforeDestroy(){this.main.loadingSomethingBigger=!1},async created(){y.setSettings({TBURL:b["TB_URL"]}),y.setSettings(b),this.centerString=this.center.join(",");window.location.hash.replace(/^[#]*[\/]*/,"")},data(){return{mapDialog:!1,facilityName:"",location:"0,0",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:15,center:[-1.286389,36.817223],centerString:"",icon:c.a.icon({iconUrl:"/images/marker-icon.png",iconSize:[32,37],iconAnchor:[16,37]}),staticAnchor:[16,37],customText:"Foobar",iconSize:64}},methods:{lmapReady(e){this.map=e,this.$refs.marker.mapObject.on("dragend",(e=>{let t=e.target._latlng;t=[t.lat,t.lng],this.center=t}))},submit(){this.$refs.createFacilityForm.submit()},async createFacility(){return y.setSettings({TBURL:b["TB_URL"]}),new Promise((async(e,t)=>{let a={center:this.center,facilityName:this.facilityName,organizationId:this.organizationId};this.main.loadingSomethingBigger=!0;let[i,s]=await p(y.createFacility(a));if(this.main.loadingSomethingBigger=!1,i){i=i.msg||i.message||i.error||i;try{i=JSON.parse(i)}catch(n){}if("object"===typeof i){let e=Object.keys(i);i=i[e[0]]}return this.$q.notify({type:"negative",message:i}),e(!1)}this.$q.notify({type:"positive",message:`${this.facilityName} created.`}),this.main.createFacilityDialog=!1,this.main.listOrganizationFacilities()}))},onReset(){this.facilityName=null}},computed:{dynamicSize(){return[this.iconSize,1.15*this.iconSize]},dynamicAnchor(){return[this.iconSize/2,1.15*this.iconSize]}},watch:{center:{handler(e){this.centerString=this.center.join(",")},deep:!0}}},v=f,w=a("2877"),q=a("0378"),S=a("27f9"),k=a("9c40"),C=a("24e8"),x=a("f09f"),z=a("a370"),T=a("eebe"),O=a.n(T),_=Object(w["a"])(v,l,o,!1,null,null,null),I=_.exports;O()(_,"components",{QForm:q["a"],QInput:S["a"],QBtn:k["a"],QDialog:C["a"],QCard:x["a"],QCardSection:z["a"]});const F=a("20e6"),A=a("c2a1").default,R=a("1712").to,E=a("6daa").default;delete c.a.Icon.Default.prototype._getIconUrl,c.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")});var Q={name:"facilitiesPage",props:["notOuterPage","main","facilitiesSidebar"],components:{breadcrumbs:n["a"],createFacility:I,rightSideBar:()=>a.e(1).then(a.bind(null,"4d6d")),LMap:d["a"],LTileLayer:m["a"],LMarker:u["a"],LIcon:g["a"],LPopup:h["a"]},watch:{$route(e,t){this.setfilters(e.path)}},data(){return{isUserPage:!1,organizationId:null,center:[0,0],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:5,tab:"facilities",activeElement_:"",mainLocal:this,editted:!1,loadingSomething:!1,loadingSomethingBigger:!1,rightSideBarP:!1,createFacilityDialog:!1,loaded:!0,links:[{label:"Settings",icon:"settings",to:"/system"},{label:"Facilities",icon:"corporate_fare",to:"/system"},{label:"Facilities",icon:"corporate_fare",to:"/facilities"}],checkedLoggedIn:!1,loggedIn:!1,listHck:[{name:"Users",icon:"settings",link:"/#/system/users",Authority:"Manage Users and Facilities",description:"Manage Users and Facilities"}],filter:"",columnsHck:[],columns:[{name:"facilityName",label:"Facility",field:"facilityName",sortable:!0},{name:"lastName",label:"Last Name",field:"lastName",sortable:!0},{name:"email",label:"Email",field:"email",sortable:!0}],numUsers:0,numSysAdmins:0,numActiveUsers:0,numInactiveUsers:0,numEnabledUsers:0,numDisabledusers:0,allFacilities:[],selectedRow:{}}},async created(){A.setVue(this),A.setSettings({TBURL:F["TB_URL"]});let e=window.location.hash.replace(/^[#]*[\/]*/,"");if(e.match(/system\/organizations/)){this.gettingOrganizationFor="organization";try{let t=e.match(/system\/organizations\/([a-zA-Z0-9\-]+)\/([a-zA-Z0-9\-]+)\/facilities/);t||(t=e.match(/system\/organizations\/([a-zA-Z0-9\-]+)\/([a-zA-Z0-9\-]+)\/users/)),t?t[2]&&(this.organizationId=t[2]):this.organizationId=this.main.selectedOrganization.organizationId,this.isUserPage=!1}catch(t){}}else if(e.match(/system\/users/)){let e=this.main.selectedUserId;this.userId=e,this.isUserPage=!0}else{this.isUserPage=!1;let t=e.match(/system\/facilities\/([a-zA-Z0-9\-]+)/),a=t[1];"mine"===a?(this.links[2].label="My Facilities",this.userId=(await A.whoAmILocally()).userId):"system"===a?(this.links[2].label="All Facilities",this.userId=null):this.userId=a}await this.listOrganizationFacilities()},methods:{manageFacilities(e){window.location.assign(`/#/system/facilities/system/${e.facilityId}/users`)},async deleteFacility(e){let{facilityId:t,facilityName:a}=e;return new Promise((async(t,a)=>{let[i,s]=await R(E.confirm(this,`Are you sure you want to delete ${e.facilityName}?`,"Delete Facility"));return i?t(!1):(this.main.loadingSomething=!0,[i,s]=await R(A.deleteFacility(e.facilityId)),this.main.loadingSomething=!1,i?(this.$q.notify({type:"negative",message:i.msg||i}),t(!1)):(this.$q.notify({type:"positive",message:`Facility ${e.facilityName} has been deleted.`}),void await this.listOrganizationFacilities()))}))},setfilters(e=!1){let t=(e||window.location.hash).replace(/[\/]*[#]*\//,"");switch(t){case"system/users":this.filters={},this.activeElement_="users",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"}];break;case"system/users/sys_admin":this.filters={authority:"SYS_ADMIN"},this.activeElement_="sys_admin",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Sys_Admins",icon:"settings",to:"/system/users/sys_admin"}];break;case"system/users/active":this.filters={isActive:!0},this.activeElement_="active",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Active",icon:"do_not_disturb_off",to:"/system/users/active"}];break;case"system/users/inactive":this.filters={isActive:!1},this.activeElement_="inactive",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Inactive",icon:"do_not_disturb_on",to:"/system/users/inactive"}];break;case"system/users/enabled":this.filters={enabled:!0},this.activeElement_="enabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Enabled",icon:"people",to:"/system/users/enabled"}];break;case"system/users/disabled":this.filters={enabled:!1},this.activeElement_="disabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Disabled",icon:"person_off",to:"/system/users/disabled"}];break}this.listOrganizationFacilities()},async listOrganizationFacilities(){this.loadingSomethingBigger=!0;let e=this.organizationId;console.log({organizationId:e}),console.log({organizationId:e}),console.log({organizationId:e});let[t,a]=[];if(e)[t,a]=await R(A.listOrganizationFacilities({organizationId:e}));else{let e=this.userId;this.userId?[t,a]=await R(A.listOrganizationFacilities({userId:e})):[t,a]=await R(A.listOrganizationFacilities())}this.loadingSomethingBigger=!1,t?this.$q.notify({type:"negative",message:t}):(this.allFacilities=a||[],console.log(this.allFacilities),this.center=this.allFacilities[0].location.coordinates,this.numUsers=this.allFacilities.length,this.numSysAdmins=this.allFacilities.filter((e=>"SYS_ADMIN"===e.authority)).length,this.numActiveUsers=this.allFacilities.filter((e=>!0===e.isActive)).length,this.numInactiveUsers=this.allFacilities.filter((e=>!1===e.isActive)).length,this.numEnabledUsers=this.allFacilities.filter((e=>!0===e.enabled)).length,this.numDisabledusers=this.allFacilities.filter((e=>!1===e.enabled)).length)},selectApplication(e){window.location.assign(e)},gotoPage(e){console.log(e),window.location.assign(e)},selectFacility(e){this.selectedFacility=e,this.selectedFacilityName=e.facilityName,this.selectedFacilityId=e.facilityId,this.selectedId="object"===typeof e.facilityId?e.id.facilityId:e.facilityId,this.rightSideBarP=!1,this.$nextTick((()=>this.rightSideBarP=!0))}},computed:{activeElement(){return this.activeElement_},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},M=Q,N=a("9989"),L=a("6b1d"),D=a("429b"),H=a("7460"),P=a("adad"),$=a("823b"),B=a("eaac"),U=a("0016"),j=a("714f"),Y=Object(w["a"])(M,i,s,!1,null,null,null);t["a"]=Y.exports;O()(Y,"components",{QPage:N["a"],QLinearProgress:L["a"],QDialog:C["a"],QCard:x["a"],QCardSection:z["a"],QTabs:D["a"],QTab:H["a"],QTabPanels:P["a"],QTabPanel:$["a"],QTable:B["a"],QInput:S["a"],QIcon:U["a"],QBtn:k["a"]}),O()(Y,"directives",{Ripple:j["a"]})},"46c6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"bg-white",attrs:{flat:""}},[a("q-card-section",{staticClass:"flex flex-center"},[a("q-card",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"cursor-pointer q-hoverable",class:e.backgroundColor,staticStyle:{width:"80vw"},on:{click:function(t){return e.gotoPage(e.localLink)}}},[a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"row"},[e.total1?e._e():a("div",{staticClass:"col-3 flex flex-center"},[a("q-icon",{staticStyle:{"font-size":"3em"},attrs:{name:e.iconName,color:"white"}})],1),a("div",{staticClass:"col"},[a("p",{staticClass:"text-bold"},[e._v(e._s(e.title))]),e.smallsize?e._e():a("h5",{ref:"number",staticClass:"q-ma-none"},[e._v(e._s(e.total))]),e.smallsize?a("p",{ref:"number",staticClass:"q-ma-none"},[e._v(e._s(e.total))]):e._e()])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e.total1?a("p",{staticClass:"text-bold"},[e._v(e._s(e.title1))]):e._e(),!e.smallsize&&e.total1?a("h5",{ref:"number",staticClass:"q-ma-none"},[e._v(e._s(e.total1))]):e._e(),e.smallsize&&e.total1?a("p",{ref:"number",staticClass:"q-ma-none"},[e._v(e._s(e.total1))]):e._e()])])])],1)],1)],1)},s=[],n={props:["title","total","backgroundColor","iconName","link","smallsize","total1","title1"],mounted(){this.link?this.localLink=this.link:this.localLink=window.location.href},created(){this.link?this.localLink=this.link:this.localLink=window.location.href},computed:{},watch:{},data(){return{localLink:window.location.href,options:{separator:"."}}},methods:{gotoPage(e){console.log(e),window.location.assign(e)}}},l=n,o=(a("d47b"),a("2877")),r=a("f09f"),c=a("a370"),d=a("0016"),m=a("714f"),u=a("eebe"),g=a.n(u),h=Object(o["a"])(l,i,s,!1,null,"62cb15cc",null);t["a"]=h.exports;g()(h,"components",{QCard:r["a"],QCardSection:c["a"],QIcon:d["a"]}),g()(h,"directives",{Ripple:m["a"]})},"4d6d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-drawer",{staticClass:"bg-primary",attrs:{bordered:"",side:"right",width:e.rightSideBarSize,overlay:"",breakpoint:2,behavior:"desktop"},model:{value:e.rightSidebarOpen,callback:function(t){e.rightSidebarOpen=t},expression:"rightSidebarOpen"}},[e.main.loadingSomething?a("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),"user"===e.objType?a("userSideBar",{attrs:{main:e.main}}):e._e(),"organization"===e.objType?a("organizationSideBar",{attrs:{main:e.main}}):e._e(),"organizationMember"===e.objType?a("organizationMemberSideBar",{attrs:{main:e.main}}):e._e(),"language"===e.objType?a("language",{attrs:{main:e.main}}):e._e(),"landing"===e.objType?a("landing",{attrs:{main:e.main}}):e._e(),"facility"===e.objType?a("facilitySideBar",{attrs:{main:e.main}}):e._e(),"facilityMember"===e.objType?a("facilityMemberSideBar",{attrs:{main:e.main}}):e._e()],1)},s=[],n=(a("cf57"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.main.selectedEmail))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("User details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}}),a("q-tab",{attrs:{name:"auditLogs",label:"Audit Logs"}}),a("q-tab",{attrs:{name:"organizations",label:"Organizations"}}),a("q-tab",{attrs:{name:"facilities",label:"Facilities"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("userDetails",{attrs:{main:e.main,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1),a("q-tab-panel",{attrs:{name:"auditLogs"}},[a("auditLogs",{attrs:{main:e.main,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1),a("q-tab-panel",{attrs:{name:"organizations"}},[a("organizationsPage",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset,notOuterPage:!0}})],1),a("q-tab-panel",{attrs:{name:"facilities"}},[a("facilitiesPage",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset,notOuterPage:!0}})],1),a("q-tab-panel",{attrs:{name:"registrations"}},[e._v(" Under construction ")])],1)],1)],1)}),l=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.openedEditing?e._e():a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Display activation link"},on:{click:e.displayActivationLink}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Resend activation"},on:{click:e.resendActivationEmail}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Login as User"},on:{click:e.loginAsUser}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Delete User"},on:{click:e.deleteUser}})],1),a("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.editUser}},[a("q-input",{attrs:{filled:"",type:"text",label:"first name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!e.openedEditing},model:{value:e.selectedRow.firstName,callback:function(t){e.$set(e.selectedRow,"firstName",t)},expression:"selectedRow.firstName"}}),a("q-input",{attrs:{filled:"",type:"text",label:"last name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!e.openedEditing},model:{value:e.selectedRow.lastName,callback:function(t){e.$set(e.selectedRow,"lastName",t)},expression:"selectedRow.lastName"}}),a("q-select",{attrs:{filled:"",options:e.authorities,label:"Authority","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please select an authority"}],disable:!e.openedEditing,clearable:!1},model:{value:e.selectedRow.authority,callback:function(t){e.$set(e.selectedRow,"authority",t)},expression:"selectedRow.authority"}}),a("q-select",{attrs:{filled:"",options:e.genders,label:"Gender","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please select a gender"}],disable:!e.openedEditing},model:{value:e.selectedRow.gender,callback:function(t){e.$set(e.selectedRow,"gender",t)},expression:"selectedRow.gender"}}),a("q-input",{attrs:{filled:"",mask:"date",label:"Date of Birth(YYYY/MM/DD)",rules:["date",function(e){return e&&e.length>0||"Please enter a dob"}],disable:!e.openedEditing},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:e.selectedRow.dateOfBirth,callback:function(t){e.$set(e.selectedRow,"dateOfBirth",t)},expression:"selectedRow.dateOfBirth"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selectedRow.dateOfBirth,callback:function(t){e.$set(e.selectedRow,"dateOfBirth",t)},expression:"selectedRow.dateOfBirth"}}),a("q-checkbox",{staticClass:"col text-black",attrs:{label:"Enabled",disable:!e.openedEditing},model:{value:e.selectedRow.enabled,callback:function(t){e.$set(e.selectedRow,"enabled",t)},expression:"selectedRow.enabled"}}),a("activationLink",{attrs:{alert:e.alert,alertUserId:e.alertUserId,main:e.main}})],1)],1)},r=[],c=(a("ddb0"),a("7c83"));a("bc3a");const d=a("1712").to,m=a("20e6"),u=a("c2a1").default,g=a("6daa").default;var h={name:"userDetails",props:["main","openedEditing","submit","reset"],components:{activationLink:c["a"]},async created(){u.setSettings({TBURL:m["TB_URL"]}),u.setVue(this),this.selectedRow=JSON.parse(JSON.stringify(this.main.selectedRow));let[e,t]=await d(u.whoAmILocally());t&&(this.whoami=t)},data(){return{selectedRow:{},whoami:{},userChanged:!1,alert:!1,alertUserId:"",genders:["Male","Female"],authorities:["SYS_ADMIN","SYS_USER"]}},methods:{async editUser(){return new Promise((async(e,t)=>{let a=this.selectedRow;this.main.loadingSomething=!0;let[i,s]=await d(u.saveUserData(a));if(this.main.loadingSomething=!1,i)return this.$q.notify({type:"negative",message:i.msg||i}),e(!1);this.$q.notify({type:"positive",message:`Saved changes for ${this.selectedRow.email}`}),await this.main.listUsers(),this.main.editted=!1,e(!0)}))},async deleteUser(e){return new Promise((async(e,t)=>{if(this.whoami.userId===this.main.selectedRow.userId)return this.$q.notify({type:"negative",message:"You can't delete you own account from here."}),t("same account");let[a,i]=await d(g.confirm(this,`Are you sure you want to delete ${this.main.selectedRow.email} account?`,"Delete Account"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await d(u.deleteUser(this.main.selectedRow.userId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Account for ${this.main.selectedRow.email} has been deleted.`}),void await this.main.listUsers()))}))},async loginAsUser(e){return new Promise((async(e,t)=>{let a=(await u.whoAmILocally()).userId;if(a===this.main.selectedRow.userId)return this.$q.notify({type:"negative",message:"You are already logged in"}),e();this.main.loadingSomething=!0;let[i,s]=await d(u.loginasUser(this.main.selectedRow.userId));this.main.loadingSomething=!1,i?(this.loggedin=!1,this.$q.notify({type:"negative",message:i.error||i.message||"failed to log in"})):window.location.assign("#/home")}))},async resendActivationEmail(){return new Promise((async(e,t)=>{this.main.loadingSomething=!0;let[a,i]=await d(u.sendActivationEmail({userId:this.main.selectedRow.userId,firstName:this.main.selectedRow.firstName,lastName:this.main.selectedRow.lastName,email:this.main.selectedRow.email,authority:this.main.selectedRow.authority,dateOfBirth:this.main.selectedRow.dateOfBirth,gender:this.main.selectedRow.gender},{activationEmail:!0,showActivationLink:!1},!0));if(this.main.loadingSomething=!1,this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(s){}if("object"===typeof a){let e=Object.keys(a);a=a[e[0]]}this.$q.notify({type:"negative",message:a}),e(!1)}else this.$q.notify({type:"positive",message:`Activation email has been sent to ${this.main.selectedRow.email}`})}))},displayActivationLink(){this.alert=!1,this.$nextTick((()=>this.alert=!0)),this.alertUserId=this.main.selectedRow.userId}},computed:{userEditted(){return(this.main.selectedRow.firstName!==this.originalSelectedUser.firstName||this.main.selectedRow.lastName!==this.originalSelectedUser.lastName||this.main.selectedRow.authority!==this.originalSelectedUser.authority||this.main.selectedRow.dateOfBirth!==this.originalSelectedUser.dateOfBirth||this.main.selectedRow.gender!==this.originalSelectedUser.gender||this.main.selectedRow.enabled!==this.originalSelectedUser.enabled)&&(this.main.editted=!0)}},watch:{selectedRow:{handler(e){JSON.stringify(this.selectedRow)!==JSON.stringify(this.main.selectedRow)?this.main.editted=!0:this.main.editted=!1},deep:!0},submit(e){e&&this.$refs.userRegistrationForm.submit()},reset(e){e&&(this.selectedRow=JSON.parse(JSON.stringify(this.main.selectedRow)))}}},p=h,b=a("2877"),y=a("9c40"),f=a("0378"),v=a("27f9"),w=a("ddd8"),q=a("0016"),S=a("7cbe"),k=a("52ee"),C=a("8f8e"),x=a("7f67"),z=a("eebe"),T=a.n(z),O=Object(b["a"])(p,o,r,!1,null,null,null),_=O.exports;T()(O,"components",{QBtn:y["a"],QForm:f["a"],QInput:v["a"],QSelect:w["a"],QIcon:q["a"],QPopupProxy:S["a"],QDate:k["a"],QCheckbox:C["a"]}),T()(O,"directives",{ClosePopup:x["a"]});var I=a("82ef"),F=a("1b38"),A=a("4618");a("bc3a"),a("1712").to,a("9fea")();var R={name:"userSideBar",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{userDetails:_,auditLogs:I["a"],organizationsPage:F["a"],facilitiesPage:A["a"]},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBar=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},E=R,Q=a("65c6"),M=a("6ac5"),N=a("de5e"),L=a("429b"),D=a("7460"),H=a("eb85"),P=a("adad"),$=a("823b"),B=Object(b["a"])(E,n,l,!1,null,null,null),U=B.exports;T()(B,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.main.selectedOrganization.organizationName))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Organization details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}}),a("q-tab",{attrs:{name:"facilities",label:"Facilities"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none  q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("organizationDetails",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1),a("q-tab-panel",{attrs:{name:"facilities"}},[a("q-tab-panel",{attrs:{name:"organizations"}},[a("facilitiesPage",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset,notOuterPage:!0}})],1)],1)],1)],1)],1)},Y=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.openedEditing?e._e():a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Users"},on:{click:e.manageUsers}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Facilities"},on:{click:e.manageFacilities}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Admins"},on:{click:e.manageAdmins}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Delete Organization"},on:{click:e.deleteOrganization}})],1),a("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.editOrganization}},[a("q-input",{attrs:{filled:"",type:"text",label:"Organization Name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!e.openedEditing},model:{value:e.selectedOrganization.organizationName,callback:function(t){e.$set(e.selectedOrganization,"organizationName",t)},expression:"selectedOrganization.organizationName"}})],1)],1)},J=[];a("5319");a("bc3a");const W=a("1712").to,G=a("20e6"),V=a("c2a1").default,K=a("6daa").default;var X={name:"organizationDetails",props:["main","openedEditing","submit","reset","immediateMain"],components:{activationLink:c["a"]},beforeDestroy(){this.main.loadingSomething=!1},async created(){V.setSettings({TBURL:G["TB_URL"]}),V.setVue(this),this.selectedOrganization=JSON.parse(JSON.stringify(this.main.selectedOrganization));let[e,t]=await W(V.whoAmILocally());t&&(this.whoami=t);let a=window.location.hash.replace(/^[#]*[\/]*/,"");if(a.match(/system\/users/)){this.gettingOrganizationFor="user";try{this.userId=this.main.selectedRow.userId}catch(i){}}else if(a.match(/system\/(organizations)\/([a-zA-Z0-9]+)/)){let e=a.match(/system\/organizations\/([a-zA-Z0-9\-]+)/),t=e[1];this.userId="mine"===t?(await V.whoAmILocally()).userId:"system"===t?null:t}},data(){return{selectedOrganization:{},whoami:{},userChanged:!1,alert:!1}},methods:{async editOrganization(){return new Promise((async(e,t)=>{let a={organizationName:this.selectedOrganization.organizationName,organizationId:this.selectedOrganization.organizationId};this.main.loadingSomething=!0;let[i,s]=await W(V.editOrganization(a));if(this.main.loadingSomething=!1,console.log(i),i)return this.$q.notify({type:"negative",message:i.msg||i}),e(!1);this.$q.notify({type:"positive",message:`Saved changes for ${this.selectedOrganization.organizationName}`}),await this.main.listUserOrganizations(),this.immediateMain.openedEditing=!1,this.main.selectedOrganization=this.selectedOrganization,this.main.editted=!1,e(!0)}))},async deleteOrganization(e){return new Promise((async(e,t)=>{let[a,i]=await W(K.confirm(this,`Are you sure you want to delete ${this.main.selectedOrganization.organizationName}?`,"Delete Organization"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await W(V.deleteOrganization(this.main.selectedOrganization.organizationId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Organization ${this.main.selectedOrganization.organizationName} has been deleted.`}),void await this.main.listUserOrganizations()))}))},async manageAdmins(e){let t="";t="user"===this.gettingOrganizationFor?`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedOrganization.organizationId}/users/org_admin`:window.location.href+`/${this.main.selectedOrganization.organizationId}/users/org_admin`,window.location.assign(t)},async manageFacilities(){let e="";e="user"===this.gettingOrganizationFor?`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedOrganization.organizationId}/facilities`:window.location.href+`/${this.main.selectedOrganization.organizationId}/facilities`,window.location.assign(e)},manageUsers(){let e="";e="user"===this.gettingOrganizationFor?`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedOrganization.organizationId}/users`:window.location.href+`/${this.main.selectedOrganization.organizationId}/users`,window.location.assign(e)}},computed:{userEditted(){return(this.main.selectedOrganization.firstName!==this.originalSelectedUser.firstName||this.main.selectedOrganization.lastName!==this.originalSelectedUser.lastName||this.main.selectedOrganization.authority!==this.originalSelectedUser.authority||this.main.selectedOrganization.dateOfBirth!==this.originalSelectedUser.dateOfBirth||this.main.selectedOrganization.gender!==this.originalSelectedUser.gender||this.main.selectedOrganization.enabled!==this.originalSelectedUser.enabled)&&(this.main.editted=!0)}},watch:{selectedOrganization:{handler(e){JSON.stringify(this.selectedOrganization)!==JSON.stringify(this.main.selectedOrganization)?this.main.editted=!0:this.main.editted=!1},deep:!0},submit(e){e&&this.$refs.userRegistrationForm.submit()},reset(e){e&&(this.selectedOrganization=JSON.parse(JSON.stringify(this.main.selectedOrganization)))}}},ee=X,te=Object(b["a"])(ee,Z,J,!1,null,null,null),ae=te.exports;T()(te,"components",{QBtn:y["a"],QForm:f["a"],QInput:v["a"]});a("bc3a"),a("1712").to,a("9fea")();var ie={name:"organizationSideBar",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{organizationDetails:ae,facilitiesPage:A["a"]},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBarP=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},se=ie,ne=Object(b["a"])(se,j,Y,!1,null,null,null),le=ne.exports;T()(ne,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.main.selectedFacility.facilityName))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Facility details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"1000"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none  q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("facilityDetails",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1)],1)],1)],1)},re=[],ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.openedEditing?e._e():a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Users"},on:{click:e.manageUsers}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Manage Admins"},on:{click:e.manageAdmins}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Delete Facility"},on:{click:e.deleteFacility}})],1),a("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.editFacility}},[a("q-input",{attrs:{filled:"",type:"text",label:"Facility Name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!e.openedEditing},model:{value:e.selectedFacility.facilityName,callback:function(t){e.$set(e.selectedFacility,"facilityName",t)},expression:"selectedFacility.facilityName"}})],1),a("q-page",{staticClass:"full-height full-width"},[a("div",{staticClass:"full-height full-width",staticStyle:{height:"100%",position:"absolute"}},[a("l-map",{ref:"lmap",staticClass:"full-width full-height",staticStyle:{width:"100%",height:"100%"},attrs:{zoom:e.zoom,center:e.center},on:{ready:e.lmapReady}},[a("l-tile-layer",{attrs:{url:e.url}}),a("l-marker",{ref:"marker",attrs:{"lat-lng":e.center,draggable:!0}})],1)],1)])],1)},de=[],me=a("e11e"),ue=a.n(me),ge=a("2699"),he=a("a40a"),pe=a("4e2b6"),be=a("fbba"),ye=a("f60f");a("6cc5");a("bc3a");const fe=a("1712").to,ve=a("20e6"),we=a("c2a1").default,qe=a("6daa").default;delete ue.a.Icon.Default.prototype._getIconUrl,ue.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")});var Se={name:"facilityDetails",props:["main","openedEditing","submit","reset","immediateMain"],components:{LMap:ge["a"],LTileLayer:he["a"],LMarker:pe["a"],LIcon:be["a"],LPopup:ye["a"]},beforeDestroy(){this.main.loadingSomething=!1},async created(){we.setSettings({TBURL:ve["TB_URL"]}),we.setVue(this),this.selectedFacility=JSON.parse(JSON.stringify(this.main.selectedFacility)),this.center=this.selectedFacility.location.coordinates,this.centerOriginal=this.center,this.selectedFacility.facilityNameOriginal=this.selectedFacility.facilityName},data(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:15,center:[-1.286389,36.817223],selectedFacility:{},whoami:{},userChanged:!1,alert:!1}},methods:{lmapReady(e){this.map=e,this.$refs.marker.mapObject.on("dragend",(e=>{let t=e.target._latlng;if(t=[t.lat,t.lng],!this.openedEditing)return this.center=this.centerOriginal,void this.$refs.marker.mapObject.setLatLng(this.center).update();this.center=t}))},async editFacility(){return new Promise((async(e,t)=>{let a={facilityName:this.selectedFacility.facilityName,facilityId:this.selectedFacility.facilityId,center:this.center};this.main.loadingSomething=!0;let[i,s]=await fe(we.editFacility(a));if(this.main.loadingSomething=!1,i)return this.$q.notify({type:"negative",message:i.msg||i}),e(!1);this.$q.notify({type:"positive",message:`Saved changes for ${this.selectedFacility.facilityName}`}),await this.main.listOrganizationFacilities(),this.immediateMain.openedEditing=!1,this.main.selectedFacility=this.selectedFacility,this.main.editted=!1,e(!0)}))},async deleteFacility(){return new Promise((async(e,t)=>{let[a,i]=await fe(qe.confirm(this,`Are you sure you want to delete ${this.main.selectedFacility.facilityName}?`,"Delete Facility"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await fe(we.deleteFacility(this.main.selectedFacility.facilityId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Facility ${this.main.selectedFacility.facilityName} has been deleted.`}),void await this.main.listOrganizationFacilities()))}))},async manageAdmins(e){let t="";if("user"===this.gettingFacilityFor)t=`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedFacility.organizationId}/users/facility_admin`;else{let e=window.location.hash.replace(/^[#]*[\/]*/,"");t=(e.match(/system\/organizations\/([a-zA-Z0-9\-]+)\/([a-zA-Z0-9\-]+)\/facilities/),`/#/system/facilities/system/${this.main.selectedFacility.facilityId}/users/facility_admin`)}window.location.assign(t)},async manageFacilities(){let e="";e="user"===this.gettingFacilityFor?`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedFacility.organizationId}/facilities`:window.location.href+`/${this.main.selectedFacility.organizationId}/facilities`,window.location.assign(e)},manageUsers(){let e=window.location.hash.replace(/^[#]*[\/]*/,""),t="";t="user"===this.gettingFacilityFor?`/#/system/organizations/${this.main.selectedRow.userId}/${this.main.selectedFacility.organizationId}/users`:(e.match(/system\/organizations\/([a-zA-Z0-9\-]+)\/([a-zA-Z0-9\-]+)\/facilities/),`/#/system/facilities/system/${this.main.selectedFacility.facilityId}/users`),window.location.assign(t)}},computed:{userEditted(){return(this.main.selectedFacility.firstName!==this.originalSelectedUser.firstName||this.main.selectedFacility.lastName!==this.originalSelectedUser.lastName||this.main.selectedFacility.authority!==this.originalSelectedUser.authority||this.main.selectedFacility.dateOfBirth!==this.originalSelectedUser.dateOfBirth||this.main.selectedFacility.gender!==this.originalSelectedUser.gender||this.main.selectedFacility.enabled!==this.originalSelectedUser.enabled)&&(this.main.editted=!0)}},watch:{center:{handler(e){JSON.stringify(this.center)!==JSON.stringify(this.main.centerOriginal)||this.selectedFacility.facilityName!==selectedFacility.facilityNameOriginal?this.main.editted=!0:this.main.editted=!1},deep:!0},"main.selectedFacility.facilityName":{handler(e){JSON.stringify(this.center)!==JSON.stringify(this.main.centerOriginal)||this.selectedFacility.facilityName!==selectedFacility.facilityNameOriginal?this.main.editted=!0:this.main.editted=!1},deep:!0},submit(e){e&&this.$refs.userRegistrationForm.submit()},reset(e){e&&(this.selectedFacility.facilityName=this.selectedFacility.facilityNameOriginal,this.center=this.centerOriginal,this.$refs.marker.mapObject.setLatLng(this.center).update())}}},ke=Se,Ce=a("9989"),xe=Object(b["a"])(ke,ce,de,!1,null,null,null),ze=xe.exports;T()(xe,"components",{QBtn:y["a"],QForm:f["a"],QInput:v["a"],QPage:Ce["a"]});a("bc3a"),a("1712").to,a("9fea")();var Te={name:"facilitySideBar",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{facilityDetails:ze},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBarP=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},Oe=Te,_e=Object(b["a"])(Oe,oe,re,!1,null,null,null),Ie=_e.exports;T()(_e,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.main.selectedEmail))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Organization Member details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none  q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("organizationMemberDetails",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1)],1)],1)],1)},Ae=[],Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.openedEditing?e._e():a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Transfer Organization to User",disable:e.main.selectedIsOwner},on:{click:e.transferOrganization}}),a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Delete Member"},on:{click:e.deleteMember}})],1),a("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.transferOrganization}},[a("q-input",{attrs:{filled:"",type:"text",label:"Email Address","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!0},model:{value:e.main.selectedEmail,callback:function(t){e.$set(e.main,"selectedEmail",t)},expression:"main.selectedEmail"}}),a("q-input",{attrs:{filled:"",type:"text",label:"Full Name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!0},model:{value:e.main.selectedFullName,callback:function(t){e.$set(e.main,"selectedFullName",t)},expression:"main.selectedFullName"}})],1)],1)},Ee=[];a("bc3a");const Qe=a("1712").to,Me=a("20e6"),Ne=a("c2a1").default,Le=a("6daa").default;var De={name:"organizationMemberDetails",props:["main","openedEditing","submit","reset","immediateMain"],components:{activationLink:c["a"]},beforeDestroy(){this.main.loadingSomething=!1},async created(){Ne.setSettings({TBURL:Me["TB_URL"]}),Ne.setVue(this);let[e,t]=await Qe(Ne.whoAmILocally());t&&(this.whoami=t)},data(){return{}},methods:{async deleteMember(e){return new Promise((async(e,t)=>{let[a,i]=await Qe(Le.confirm(this,`Are you sure you want to remove ${this.main.selectedFullName} from ${this.main.currentOrganization.organizationName}?`,"Delete Member"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await Qe(Ne.deleteOrganizationUser(this.main.selectedOrganizationUserId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Account for ${this.main.selectedFullName} has been removed.`}),void await this.main.listOrganizationMembers()))}))},async transferOrganization(){return new Promise((async(e,t)=>{let[a,i]=await Qe(Le.confirm(this,`Are you sure you want to transfer organization to ${this.main.selectedFullName}?`,"Transfer Organization"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await Qe(Ne.transferOrganization({userId:this.main.selecteduserId,organizationId:this.main.currentOrganization.organizationId})),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Organization ${this.main.currentOrganization.organizationName} has been transfered to new owner.`}),void await this.main.listOrganizationMembers()))}))}},computed:{userEditted(){return!1}},watch:{selectedOrganization:{handler(e){},deep:!0},submit(e){},reset(e){}}},He=De,Pe=Object(b["a"])(He,Re,Ee,!1,null,null,null),$e=Pe.exports;T()(Pe,"components",{QBtn:y["a"],QForm:f["a"],QInput:v["a"]});a("bc3a"),a("1712").to,a("9fea")();var Be={name:"organizationMemberSideBar",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{organizationMemberDetails:$e},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBar=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},Ue=Be,je=Object(b["a"])(Ue,Fe,Ae,!1,null,null,null),Ye=je.exports;T()(je,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v(e._s(e.main.selectedEmail))]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Facility Member details")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.main.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.main.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none  q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("facilityMemberDetails",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1)],1)],1)],1)},Je=[],We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.openedEditing?e._e():a("div",{staticClass:"q-pa-sm"},[a("q-btn",{staticClass:"bg-primary q-mr-md q-mb-md",attrs:{"no-caps":"",label:"Delete Member"},on:{click:e.deleteMember}})],1),a("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.transferOrganization}},[a("q-input",{attrs:{filled:"",type:"text",label:"Email Address","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!0},model:{value:e.main.selectedEmail,callback:function(t){e.$set(e.main,"selectedEmail",t)},expression:"main.selectedEmail"}}),a("q-input",{attrs:{filled:"",type:"text",label:"Full Name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter a name"}],disable:!0},model:{value:e.main.selectedFullName,callback:function(t){e.$set(e.main,"selectedFullName",t)},expression:"main.selectedFullName"}})],1)],1)},Ge=[];a("bc3a");const Ve=a("1712").to,Ke=a("20e6"),Xe=a("c2a1").default,et=a("6daa").default;var tt={name:"organizationMemberDetails",props:["main","openedEditing","submit","reset","immediateMain"],components:{activationLink:c["a"]},beforeDestroy(){this.main.loadingSomething=!1},async created(){Xe.setSettings({TBURL:Ke["TB_URL"]}),Xe.setVue(this);let[e,t]=await Ve(Xe.whoAmILocally());t&&(this.whoami=t)},data(){return{}},methods:{async deleteMember(e){return new Promise((async(e,t)=>{let[a,i]=await Ve(et.confirm(this,`Are you sure you want to remove ${this.main.selectedFullName} from ${this.main.currentFacility.facilityName}?`,"Delete Member"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await Ve(Xe.deleteFacilityUser(this.main.selectedFacilityUserId)),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Account for ${this.main.selectedFullName} has been removed.`}),void await this.main.listFacilityMembers()))}))},async transferOrganization(){return new Promise((async(e,t)=>{let[a,i]=await Ve(et.confirm(this,`Are you sure you want to transfer organization to ${this.main.selectedFullName}?`,"Transfer Organization"));return a?e(!1):(this.main.loadingSomething=!0,[a,i]=await Ve(Xe.transferOrganization({userId:this.main.selecteduserId,organizationId:this.main.currentOrganization.organizationId})),this.main.loadingSomething=!1,a?(this.$q.notify({type:"negative",message:a.msg||a}),e(!1)):(this.$q.notify({type:"positive",message:`Organization ${this.main.currentOrganization.organizationName} has been transfered to new owner.`}),void await this.main.listOrganizationMembers()))}))}},computed:{userEditted(){return!1}},watch:{selectedOrganization:{handler(e){},deep:!0},submit(e){},reset(e){}}},at=tt,it=Object(b["a"])(at,We,Ge,!1,null,null,null),st=it.exports;T()(it,"components",{QBtn:y["a"],QForm:f["a"],QInput:v["a"]});a("bc3a"),a("1712").to,a("9fea")();var nt={name:"facilityMemberSideBar",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{facilityMemberDetails:st},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBar=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},lt=nt,ot=Object(b["a"])(lt,Ze,Je,!1,null,null,null),rt=ot.exports;T()(ot,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v("Settings")]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Language Settings")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing&&!e.editted?a("q-btn",{staticClass:"text-black q-mr-sm",attrs:{fab:"",icon:"done",color:"transparent",disable:!0}}):e._e(),e.openedEditing&&e.editted?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-tabs",{staticClass:"text-black",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"details",label:"Details"}})],1),a("q-separator"),a("div",[a("q-tab-panels",{staticClass:"q-ma-none q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"details"}},[a("changeLanguage",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1)],1)],1)],1)},dt=[],mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-form",{ref:"changeLangForm",staticClass:"q-gutter-md text-white",on:{submit:e.changeLang}},[a("q-select",{attrs:{filled:"",options:e.langs,label:"Language","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please select a language"}],disable:!e.immediateMain.openedEditing},on:{input:e.changeLang},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}})],1)],1)},ut=[];a("bc3a"),a("1712").to;const gt=a("ea76").default;var ht={name:"changeLanguage",props:["openedEditing","immediateMain","main","submit","reset"],components:{},beforeDestroy(){},async created(){this.lang=gt.getLang(),this.langs=gt.listLangs(),this.langOriginal=this.lang,this.main.immediateMain=!1},data(){return{lang:"",langOriginal:"",langs:[]}},methods:{async changeLang(){}},computed:{lange(){this.lang!==this.langOriginal&&(this.immediateMain.editted=!0)||(this.immediateMain.editted=!1)}},watch:{lang(e){this.lang!==this.langOriginal&&(this.immediateMain.editted=!0)||(this.immediateMain.editted=!1)},submit(e){if(e){let e=this.lang;gt.setLang(e),this.langOriginal=this.lang,this.immediateMain.editted=!1}},reset(e){e&&(this.lang=this.langOriginal)}}},pt=ht,bt=Object(b["a"])(pt,mt,ut,!1,null,null,null),yt=bt.exports;T()(bt,"components",{QForm:f["a"],QSelect:w["a"]});a("bc3a"),a("1712").to,a("9fea")();var ft={name:"language",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{changeLanguage:yt},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{editted:!1,rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBarP=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},vt=ft,wt=Object(b["a"])(vt,ct,dt,!1,null,null,null),qt=wt.exports;T()(wt,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});var St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",{staticClass:"q-mt-md q-ml-md"},[a("span",{staticClass:"text-weight-bold q-pt-lg"},[e._v("Settings")]),a("br"),a("span",{staticClass:"text-caption",staticStyle:{"font-size":"0.8em"}},[e._v("Navigate to new page to change landing page")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.closeSelf}})],1),a("q-page-sticky",{staticClass:"q-gutter-xs q-ma-sm",staticStyle:{"z-index":"3"},attrs:{position:"top-right",offset:[18,0]}},[e.openedEditing?e._e():a("q-btn",{staticClass:"q-ma-sm",attrs:{fab:"",icon:"edit",color:"red"},on:{click:function(t){e.openedEditing=!0}}}),e.openedEditing?a("q-btn",{staticClass:"q-mr-sm",attrs:{fab:"",icon:"done",color:"red"},on:{click:e.submitForm}}):e._e(),e.openedEditing?a("q-btn",{attrs:{fab:"",icon:"close",color:"red"},on:{click:e.resetForm}}):e._e()],1),a("q-separator"),a("div",[a("changeLanding",{attrs:{main:e.main,immediateMain:e.immediateMain,openedEditing:e.openedEditing,submit:e.submit,reset:e.reset}})],1)],1)},kt=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("iframe",{ref:"defaultLandingIframe",staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"hidden"},attrs:{src:e.url,scrolling:"no",frameBorder:"0"}}),e.immediateMain.openedEditing?e._e():a("div",{staticClass:"bg-transparent absolute-center full-height",staticStyle:{width:"100%",height:"100% z-index:300"}})])},xt=[];const zt=a("c2a1").default;var Tt={name:"changeLanding",props:["openedEditing","immediateMain","main","submit","reset"],components:{},beforeDestroy(){},data(){return{links:[{label:"Settings",icon:"settings",to:"/system"},{label:"Default Home",icon:"house",to:"/system/landing_page"}],url:""}},created(){let e=zt.getDefaultPageAfterLogin("");this.url=e,this.urlOriginal=e},watch:{submit(e){if(e){let e=this.url;e=this.$refs.defaultLandingIframe.contentDocument.location.href.split(window.location.protocol+"//"+window.location.host).join(""),zt.setDefaultPageAfterLogin(e),console.log({defaultUrl:e}),this.immediateMain.openedEditing=!1}},reset(e){this.url=this.urlOriginal,this.immediateMain.openedEditing=!1}}},Ot=Tt,_t=Object(b["a"])(Ot,Ct,xt,!1,null,null,null),It=_t.exports;T()(_t,"components",{QPage:Ce["a"]});a("bc3a"),a("1712").to;var Ft={name:"landing",props:["main"],created(){this.main.selectedTab&&(this.tab=this.main.selectedTab)},components:{changeLanding:It},beforeDestroy(){this.main.selectedTab=this.tab},data(){return{editted:!1,rightSidebarOpen:!0,tab:"details",openedEditing:!1,submit:!1,reset:!1,immediateMain:this}},methods:{submitForm(){this.submit=!1,this.$nextTick((()=>this.submit=!0))},closeSelf(){this.main.rightSideBarP=!1},resetForm(){this.reset=!1,this.$nextTick((()=>this.reset=!0)),this.openedEditing=!1,this.main.editted=!1}},computed:{}},At=Ft,Rt=Object(b["a"])(At,St,kt,!1,null,null,null),Et=Rt.exports;T()(Rt,"components",{QToolbar:Q["a"],QToolbarTitle:M["a"],QBtn:y["a"],QPageSticky:N["a"],QTabs:L["a"],QTab:D["a"],QSeparator:H["a"],QTabPanels:P["a"],QTabPanel:$["a"]});a("bc3a"),a("1712").to,a("9fea")();var Qt={name:"rightSideBar",props:["main","objType"],created(){},components:{userSideBar:U,organizationSideBar:le,organizationMemberSideBar:Ye,facilityMemberSideBar:rt,language:qt,landing:Et,facilitySideBar:Ie},data(){return{rightSidebarOpen:!0,tab:"login"}},methods:{},computed:{rightSideBarSize(){return this.$q.screen.lt.xs||this.$q.screen.lt.sm||this.$q.screen.lt.md?document.getElementsByTagName("body")[0].clientWidth:.75*document.getElementsByTagName("body")[0].clientWidth}}},Mt=Qt,Nt=a("9404"),Lt=a("6b1d"),Dt=Object(b["a"])(Mt,i,s,!1,null,null,null);t["default"]=Dt.exports;T()(Dt,"components",{QDrawer:Nt["a"],QLinearProgress:Lt["a"]})},"4f9f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA0LTE1VDE1OjIyOjI4KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNC0yNFQxNDozNTo1OSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNC0yNFQxNDozNTo1OSswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowOWZkNzMwNC0zNTE3LTU0NGQtYWU2NC0xNjY2ZDBmNGZhMjYiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDplYzU1ZDc2Ny01NGRjLTMwNDEtODIxOS03YzllNzQ2ZTY2NTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphZTdhMTViNS0yYjg3LWM1NDItOWJjNS00ODY0ODRjMThiOWYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFlN2ExNWI1LTJiODctYzU0Mi05YmM1LTQ4NjQ4NGMxOGI5ZiIgc3RFdnQ6d2hlbj0iMjAxOS0wNC0xNVQxNToyMjoyOCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNzY5MjA1Yi00ZWFiLTM2NGMtYTg0Ny1jNmNkODhkMzc2M2QiIHN0RXZ0OndoZW49IjIwMTktMDQtMjRUMTQ6MzU6NTkrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDlmZDczMDQtMzUxNy01NDRkLWFlNjQtMTY2NmQwZjRmYTI2IiBzdEV2dDp3aGVuPSIyMDE5LTA0LTI0VDE0OjM1OjU5KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+PBKBVwAAC+hJREFUeNrtnXm0VVUdxz9vYHrMk/CMZCpYICCDQWIgIYELsCiEQCW1sLLJLKxWg2OTubIJKSPTihIt0sDHJEqJQ4VoqaSgvkck8Qhkppc83r398fsd33nHvc+dzrn33PvOb627eNx7hr33d+/f/s27LJlMElOEKJlMUgKgDAAmAxVFj0ORA9IO+DCwHTgG3A2MiAEpDE0F1gFJz+ffwFeB3jEg+aGhwI91RSR9Pk8DC4E2MSDhUFdgCbDLMPi1wMuG708BDwDnxIAER+XARcCThgE/CvwIGKwb+23AIcN1h4DvAwNjQHKjdwArgdcNg1wDTDHc8y7gD0DCcM9O4FNApxiQzOgM4BbgoGFQ/w4sSrE3VOr+8bRlf/kjMFtXXwyID7UHFqsY6x3E/cBNwOkZPK8vcB1Qb3jeiSiJyVEEZDqw0TBw/wV+AYzO4dkjgZ8rCN7n7wVuUPBiQIDhwB0WMfZR4L1AWUDvmgVs9hGTLy2UmBwFQHoCXwL2GAbnFeAzQOcQ3lsFXKUbvPe9CWANMKk1AVIOzAe2GgbkCPADFWPzYf/6rkVMPqxi8qBSB+SdwO+ARs8ANKmoOqkAK3UisEqVSNNKvTofYnK+ARkAfMcyG7cBlxTYxFEBLAD+atlfHlWho+gB6Qh8HNhh6ehvgG4R0n+qgO9ZlMoNhGjezwcgFwAP428A3KUbe3UEwGgHzAUet7R1oyqcRQfImcCdwHFDp3ZbZt/fVORsWyAwJgL3G/Y292d9sQHSB/gK4o8w2ZA+oSvhSh8WVgOcl0cgBqg0ddgi8R0vRkAqgQ/q5mwTY73i40AfkfMQ8MOQRd9OOkF2WibG71WJ3FZsgJyD+BuaPB1q1O8nprh/gnb+pGFQ6oDPIn6QIHWgWYhx0QTEMyrxVarU91SxAOLM8IMWMfbiDMTYNj6KYlI32QsDMJ+MUptYA3a3bx/X9V2LYYV0Bj6J2Tv3qu4hPbNsUy+VuF41PPt1FZHHZPHc09R4uNfw3P+p0XGk4b7IAzLTstRPaKfODNDYuByzZXYfcDPpmeDbIX6TZywrb7P2yUaRBWQk4jcwDdDDwAyCd/SUqWa8yTKYzwKX66CbaBKw2mIOeUlXeZcUbYgcINU+S/0FFV+rQhZLOyAOqxd9dIN3u64fjPjYjxquPQDcCvRP892RAaSNShqmpf4a4lp9a54VtzOAb1uECMcyuySFGDsxw3cWHJAKJEBgtWXz+y0SdFBIGg/cq+1JpvHZqkbDbGxQBQdkMGJu9nbqHyq7R4nmWNrqlvi+rBJWtlQQQCo9ltmuFq22Wv89HgEwegPDLG1tAlYoW32BYiTXChmBOTrD+TyGhM4U0hp7hUpYtjbWB7i/FWSF+ImrXtHrXMTb9yvgrDyDMUU35p8ZlLhG198JijglgRT6Qw1wOxKG456llyK+gRvJLEYqGxqibXhQlTh3e/erklhj0GGKl3xY1m16yQzgER8F7UM+Clou7OJzmAOrm4D7gLP12ts9NqmBxcyy/ABZ6tnwP+qjoK0lGD9GJeK1e8LynieRwGv3SlneGgFxqL9quzY/xlKy92OMA35t0TH+pYZHUxJOqwbEoQm6wZui0uuU3fRIsy39gG+oFcCUbnAHkqRjoxgQl4llHvbQmceB9/lssu1pzg+0BRWcn0ZfYkA81BP4grIV76A2AvcAYz33TMMcWJ1UgBYrYMSAZA6IQ8OBn2L3Y1yvtrKlmCNS9gPfUhaWCYUFSCdaunDXEWI+SRiAOPQen9l/xLKK7tVNPRsKC5BqteM5z96UF/UjBEBA/Bgf8XTIJsbOyXHmhQGIo3slPJPpFsQVUHSAuCWobyLOIW/A3JIMJLF8ATIce5Cf2/p9pU66ogPEoas9nboiwGcHAchpSNSJKVclYQHmIQIMwE7HuBgkHfD8/2hELEdO1HsN5uCJLUiI0vUqdHglxVWqJw3Lhy0ryBWyyDO75kVghZyLxPOaZv/LSAaXOy9kNOJrMcV17VFLQq9iYVlRAqQ/9iC/o/hncJUjOY+PWYB8SvtWEQOSGpBOSPiPKRDiFJllcHVBwlxrLc9ahWSLxYBYAJmJf/btIrJLhXgbEnZk0q8OqiF2QAxIM40E7kKcbKb89OsIpozTJMSJZivncRUp8hRLFZA9SMB0b+BrmIP8GpBIzFEBS2xttZ82n/8jSFZZq1shX8RcOciJ551FuDVOqhH39j7D+49jiYMuVUCaLEDsQBJ0wg59ddMo4JcWdumkP/QtlGKYL/L25wiSVTsDWEbLgI2w6Vm1SMxTBdO7im5GXN8LcbkaSg2QNyYcksF1Ps3BEoWgJrUCzFL7V53n9zFI3suiUgcE5ddRMdEcQwJEDlt+713qgJQh8WN/UmmrVwHbMhRx3K3HngHW1BpWiMOrb0KqMOS7fIdT7eghZVcdDWw15SZY7PQfJI9kh+f7sap73KdGxTCpQjfytYhL2htrvFnbeLI1ANKIGAen01wQwKFKxDu5ViWvMEovjVfQV+rfbqoDrtEN/gEsBshSFHs7IB7JaxDL7GrPNY5hcD3BVSjth1Q7qgE+4BnXE0i46wU6SRrw8TaW+h6yRQfoEiSkx01vRwyDNQpcNmPRRe1Um4BrPcJDQu1bsxT4ndkoUqVITSrrz0Y8f/We3ycri7mTzNIspiNm9mW8ObLyOSTIY75KellrtqVM9SpxTaPZAuxQByTNeqOC5leh1AmEWK3P8goVNypYdyt7IgbEn7YjIawXIYUQ3ORUfdjAm4s190LyFtfr/e08wsQK3SduMKzCtKmS1kvrkNJ9lyFRMUNcvzl1UebrZt0XsSKPs+xTt+pelMi1Ua0ZEEcCWqai8KeVbfVwafuzkXNK2hrG6hUVCu4K0kRTTkwgxsfPq0R0v2emV3nAOIbU85quOk+g9rIYkJb0Z9WyFyIRJG46qRv5TGVxtWE0oNJjW4mPbGvOYdymUtcgF1gXK5sLVbN1A5KI8XiD9nnY0eGwwTABElMztfGMTwV5yIGP95CIUQxIDEhMMSAxIDHFgLQCQIpFDE56/m4qgjYnShkQd+fakn7BgUIvhLJMAZmOlPiOMl1IyzKxPRAL7NQIt3kS4ldxK5llJkDKaOl8H4q4KFeQ2xmCYdBopLLdKlr6Mcp1Iq1BzOpDItTmQYiVuAYprmBeGK7o9646u0zlkfYi7s9sD18MKvq9L/bizqZPHRJ80C2Ld3VHjnl1nvUg2ZlOuiDW4ZewF9k5y1ZIuRyJFE9V4rt9ngFpj1SusyXDbEDCfrbgX/isMo+AVCDVkGxteh5xBbdvsTAspcargI8hpVZtFeSm5AmQ8/R9pna8qO3s6BrEa7GXBlxJ+sWgcwFkDFKMzXQuyj4MZ/qmW4y/P/bj7o7QfJZ5GIA4ddxNCZWH8K/jPhT4CeZkmQNIuY+3hABIHyTqxFRut1FBGmsUaTM8rmIC4rRptPDpVHVLMgGkh7KfOkunMkk5nuqzupyaJZ0CAKSDsh8bS3XO9LXrGFmcH9IWicL4C/ZCy3NyAKRM77cdW7dV359pBdSOSEG05zHXMdlgkHoyAWSKSk6mdLpanVzdU2q3ORx51A2pILcbc9L8PTSXcE0XkHHK303nfezW92V7co9bQvu6hZ00IDkcwzMAZIiK1qaCbQeRON60C+EEcSjYMCTh0lT7o1477xwYucDz+/v1++oUg7TcM0hBkB/4/1Twu+hKdB/Z4QRtd9ZZX2tZyWuQ8NTM7D8BHps3TZd9wiLaLVBJKOFiE5cjkR3bLWxko4WNBEWp2OMTyuaeo2XNxbnY65w457FnFesW9MGSVbpBbrewsV0uHpvQ2XXKstEuJn/py92RpNBai5jsFluPYS6LuwepCNEnJwtpSEevno65glyqz2t6Xz8KQ4ORHI6jGbS5ASkCMCIQk3XIhxOfjRS2bEzRKacA5viI2Jsm+4jJ3jIZM4J8cT5Oi25D6jrucynsOeo29nuZRadwKkJ0Dvql+Tzgvqsqjo6itwuJo+1GtKmPmjjqaT7hLbTD0PIJiEMjdAMdQXHRODIsRpYLIGV5AiOmNCkOcogY/R8lQC81mhlqVgAAAABJRU5ErkJggg=="},5757:function(e,t,a){"use strict";var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:t.createUser,reset:t.onReset}},[i("q-input",{attrs:{filled:"",type:"text",label:"first name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter your name"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),i("q-input",{attrs:{filled:"",type:"text",label:"last name","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter your name"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),i("q-select",{attrs:{"use-input":"",filled:"",options:t.genders,label:"Gender","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please select your gender"}]},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}}),i("q-input",{attrs:{filled:"",mask:"date",label:"Date of Birth(YYYY/MM/DD)",rules:["date",function(e){return e&&e.length>0||"Please enter your dob"}]},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[i("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-date",{model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}},[i("div",{staticClass:"row items-center justify-end"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}}),i("q-input",{attrs:{filled:"",type:"email",label:"email","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please enter your email address"},function(t){return e.isValidEmail()||"Invalid email address"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t.showAccept?i("terms",{attrs:{accept:t.accept,main:t.mainLocal}}):t._e(),t.showActivation?i("div",{staticClass:"col"},[i("q-checkbox",{staticClass:"col",attrs:{label:"Send Activation Email"},model:{value:t.activationEmail,callback:function(e){t.activationEmail=e},expression:"activationEmail"}}),i("q-checkbox",{staticClass:"col",attrs:{label:"Show Activation link"},model:{value:t.showActivationLink,callback:function(e){t.showActivationLink=e},expression:"showActivationLink"}})],1):t._e(),i("div",[i("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),i("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1),i("activationLink",{attrs:{alert:t.alert,alertUserId:t.alertUserId,main:t.main}})],1)},s=[],n=(a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toggle",{attrs:{color:"secondary"},on:{input:e.toggled},model:{value:e.localAccept,callback:function(t){e.localAccept=t},expression:"localAccept"}}),e._v("I\n  accept the\n  "),a("a",{staticClass:"text-underline text-italic",staticStyle:{"text-decoration":"underline",cursor:"pointer"},attrs:{clickable:""},on:{click:e.showTerms}},[e._v("terms and conditions")]),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:e.termsDialog,callback:function(t){e.termsDialog=t},expression:"termsDialog"}},[a("q-card",[a("q-card-section",{staticClass:"q-pt-none"},[""!==e.termsText?a("q-markdown",[e._v("\n          "+e._s(e.termsText)+"\n        ")]):e._e()],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ok",color:"primary"}})],1)],1)],1)],1)}),l=[],o=a("cf57");a("bc3a"),a("1712").to;const r=a("9fea")();var c={name:"terms",props:{accept:Boolean,main:Function},created(){this.myParent=this.main(),this.localAccept=this.accept},data(){return{localAccept:!1,myParent:null,termsText:"",termsDialog:!1}},methods:{async showTerms(){this.termsDialog=!0,this.termsText=r},toggled(e){this.$nextTick((function(){this.myParent.changeAccept(e)}))},showCustom(e=""){const t=this.$q.dialog({title:e,message:"",progress:{spinner:o["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),t.hide())}),500)}}},d=c,m=a("2877"),u=a("9564"),g=a("24e8"),h=a("f09f"),p=a("a370"),b=a("4b7e"),y=a("9c40"),f=a("7f67"),v=a("eebe"),w=a.n(v),q=Object(m["a"])(d,n,l,!1,null,null,null),S=q.exports;w()(q,"components",{QToggle:u["a"],QDialog:g["a"],QCard:h["a"],QCardSection:p["a"],QCardActions:b["a"],QBtn:y["a"]}),w()(q,"directives",{ClosePopup:f["a"]});var k=a("7c83");a("bc3a");const C=a("1712").to,x=a("20e6"),z=a("c2a1").default;var T={name:"registrationForm",components:{terms:S,activationLink:k["a"]},props:["inside","main"],async created(){z.setSettings({TBURL:x["TB_URL"]}),z.setSettings(x),this.inside&&(this.showAccept=!1,this.accept=!0,this.showActivation=!0,this.activationEmail=!1,this.showActivationLink=!0)},data(){return{activationPage:"",accept:!1,showAccept:!0,showActivation:!1,showActivationLink:!1,activationEmail:!0,email:"",firstName:"",lastName:"",gender:"Male",genders:["Male","Female"],dob:"",password:"",cpassword:"",passwordErrorMessage:"",users:[],alert:!1,alertUserId:null}},methods:{changeAccept(e){this.accept=e},submit(){this.$refs.userRegistrationForm.submit()},mainLocal(){return this},isValidEmail(){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(this.email)||"Invalid email"},showCustom(e=""){const t=this.$q.dialog({title:e,message:"",progress:{spinner:o["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),t.hide())}),500)},async createUser(){return z.setSettings({TBURL:x["TB_URL"]}),new Promise((async(e,t)=>{if(!0!==this.accept)return this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"You need to read and accept the terms and conditions"}),e(!1);this.working=!0,this.showCustom();let[a,i]=await C(z.createUser({email:this.email,firstName:this.firstName,lastName:this.lastName,gender:this.gender,dateOfBirth:this.dob,authority:"SYS_USER"},{activationEmail:this.activationEmail,showActivationLink:this.showActivationLink},!0));if(this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(s){}if("object"===typeof a){let e=Object.keys(a);a=a[e[0]]}this.$q.notify({type:"negative",message:a}),e(!1)}else this.showActivationLink?(this.alertUserId=i,this.alert=!1,this.$nextTick((()=>this.alert=!0))):this.$q.notify({type:"positive",message:"Registration successful. Check your email to activate you account."}),this.main.listUsers()}))},onReset(){this.email=null,this.firstName=null,this.lastName=null,this.password=null,this.cpassword=null,this.accept=!1}}},O=T,_=a("0378"),I=a("27f9"),F=a("ddd8"),A=a("0016"),R=a("7cbe"),E=a("52ee"),Q=a("8f8e"),M=Object(m["a"])(O,i,s,!1,null,null,null);t["a"]=M.exports;w()(M,"components",{QForm:_["a"],QInput:I["a"],QSelect:F["a"],QIcon:A["a"],QPopupProxy:R["a"],QDate:E["a"],QBtn:y["a"],QToggle:u["a"],QCheckbox:Q["a"],QDialog:g["a"],QCard:h["a"],QCardSection:p["a"]}),w()(M,"directives",{ClosePopup:f["a"]})},"5bfc":function(e,t,a){var i={"./adventhymnals/translations.json":"3583","./angelbot/translations.json":"c94c","./cysmed/translations.json":"e591","./gospelsounders/translations.json":"c36d"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="5bfc"},"5d3b":function(e){e.exports=JSON.parse('{"ORG":["ORG_USER"],"FACILITY":["FACILITY_ADMIN","FACILITY_USER"]}')},"66e6":function(e,t,a){"use strict";a("9a8c")},"6daa":function(e,t,a){"use strict";a.r(t);var i=a("cf57");const s=a("e350").default,n=a("4556");class l extends s{constructor(){super()}async confirm(e,t,a="Confirm"){return new Promise(((i,s)=>{e.$q.dialog({title:a,message:t,cancel:!0,persistent:!0}).onOk((()=>i(!0))).onOk((()=>i(!0))).onCancel((()=>s(!0))).onDismiss((()=>s(!0)))}))}showDialog(e,t="",a="",s=0){let l=n({length:10});const o=e.$q.dialog({title:t,message:a,progress:{spinner:i["a"],color:"primary"},persistent:!0,ok:!1});let r,c,d=s;o.update({message:`${d} secs`});const m=()=>{clearInterval(r),clearInterval(c),o.hide()};return c=setInterval((()=>{s>0?(d--,0===d&&m()):d++,o.update({message:`${d} secs`})}),1e3),this.once(l,m),l}}t["default"]=new l},"6e23":function(e,t,a){var i={"./adventhymnals/csysteminfo.png":"0830","./angelbot/csysteminfo.png":"4f9f","./cysmed/csysteminfo.png":"7ec1","./gospelsounders/csysteminfo.png":"0a24"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="6e23"},"7c83":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{"full-width":""},model:{value:e.innerAlert,callback:function(t){e.innerAlert=t},expression:"innerAlert"}},[a("q-card",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[e._v("User activation link")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",[e._v("\n      In order to activate user use the following\n      "),a("a",{attrs:{href:e.activationPage}},[e._v("activation link")]),e._v(" :\n    ")]),a("q-card-section",{staticClass:"text-center row flex flex-center"},[a("div",{staticClass:"col text-no-wrap flex flex-center"},[a("code",{staticClass:"bg-grey-4 text-h6 text-bold q-pa-md row text-no-wrap",staticStyle:{"overflow-x":"scroll","overflow-y":"none"}},[e._v(e._s(e.activationPage))]),a("q-btn",{staticClass:"text-primary",attrs:{icon:"content_copy",flat:""},on:{click:e.copyActivationLinkToClipBoard}},[a("q-tooltip",[e._v(" Copy activation link ")])],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1)},s=[];a("ddb0"),a("cf57");const n=a("1712").to,l=a("20e6"),o=a("c2a1").default;var r={name:"activationLink",components:{},props:["inside","alert","alertUserId","main"],async created(){o.setSettings({TBURL:l["TB_URL"]}),o.setSettings(l),this.showAccept=!1,this.accept=!0},data(){return{activationPage:"",accept:!1,showAccept:!0,innerAlert:!1}},watch:{async alert(e,t){this.main.loadingSomethingBigger=!0;let[a,i]=await n(o.getActivationCode(this.alertUserId));if(this.main.loadingSomethingBigger=!1,a)return void this.$q.notify({type:"negative",message:a||a.response||"Couldn't fetch activation link"});this.innerAlert=!0;let{activationCode:s}=i,l=window.location.protocol+"//"+window.location.host+`/#/activate?activateToken=${s}`;this.activationPage=l}},methods:{copyActivationLinkToClipBoard(){navigator.clipboard.writeText(this.activationPage).then((()=>{this.$q.notify({type:"positive",message:"Activation link copied!"})}),(()=>{}))}}},c=r,d=a("2877"),m=a("24e8"),u=a("f09f"),g=a("a370"),h=a("65c6"),p=a("6ac5"),b=a("9c40"),y=a("05c0"),f=a("4b7e"),v=a("7f67"),w=a("eebe"),q=a.n(w),S=Object(d["a"])(c,i,s,!1,null,null,null);t["a"]=S.exports;q()(S,"components",{QDialog:m["a"],QCard:u["a"],QCardSection:g["a"],QToolbar:h["a"],QToolbarTitle:p["a"],QBtn:b["a"],QTooltip:y["a"],QCardActions:f["a"]}),q()(S,"directives",{ClosePopup:v["a"]})},"7ec1":function(e,t,a){e.exports=a.p+"img/src/assets/cysmed/csysteminfo.png"},"82ef":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-tabs",{staticClass:"text-black bg-secondary",attrs:{align:"left"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"logins",label:"Logins"}}),a("q-tab",{attrs:{name:"activeDevices",label:"Active Devices"}}),a("q-tab",{attrs:{name:"create",label:"Create"}}),a("q-tab",{attrs:{name:"update",label:"Update"}}),a("q-tab",{attrs:{name:"delete",label:"Delete"}})],1),a("q-tab-panels",{staticClass:"q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-pa-none q-ma-none",attrs:{name:"logins"}},[a("logins",{attrs:{main:e.main,immediateMain:e.immediateMain}})],1),a("q-tab-panel",{staticClass:"q-pa-none q-ma-none",attrs:{name:"activeDevices"}},[a("logins",{attrs:{main:e.main,immediateMain:e.immediateMain}})],1)],1)],1)},s=[],n=(a("5319"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-table",{staticClass:"col",attrs:{title:"Logins",dense:"",data:e.allLogins,columns:e.columns,filter:e.filter,"row-key":"loginId",selection:"multiple",selected:e.selected},on:{"row-click":e.selectLogin,"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("dateTimeRange",{attrs:{immediateMain:e.myImmediateMain,id:e.id}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",outlined:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-btn",{attrs:{flat:"",disable:!e.selectedRows}},[a("q-icon",{attrs:{color:"primary",name:"logout",side:""},on:{click:function(t){return e.logoutSelected()}}})],1),a("q-btn",{attrs:{flat:""}},[a("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(t){return e.fetchLogins()}}})],1)]},proxy:!0},{key:"body-cell-ip",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[t.row.isMe?a("q-icon",{staticClass:"text-white",attrs:{name:"person"}}):e._e(),a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-browser",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-os",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-platform",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-createdAt",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-email",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[a("q-chip",{class:t.row.isMe?"bg-transparent":"bg-transparent text-white",attrs:{dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))])],1)]}},{key:"body-cell-active",fn:function(t){return[a("q-td",{class:t.row.isMe?"bg-primary":t.row.active?"bg-secondary":"bg-black text-white",attrs:{props:t}},[t.row[t.col.name]?e._e():a("q-chip",{staticClass:"text-weight-bolder",attrs:{color:!0===t.row.active?"green":"red","text-color":"white",dense:"",square:""}},[e._v(e._s(t.row[t.col.name]))]),t.row[t.col.name]?a("q-btn",{staticClass:"bg-white",attrs:{flat:"",icon:"logout"},on:{click:function(a){return e.logoutFromBtn(t.row)}}}):e._e()],1)]}}])})],1)}),l=[],o=(a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-btn",{staticClass:"bg-primary text-white",attrs:{"no-caps":"",icon:"schedule",label:e.dateRangeSelectLabel}},[a("q-menu",{ref:"menu0",staticClass:"q-ma-md q-pa-md"},[a("q-card",{staticClass:"q-pa-none q-ma-none",staticStyle:{width:"300px"}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none"},[a("div",[a("q-radio",{attrs:{val:"last",label:"Last"},on:{input:e.dateRangeSelectTypeChanged},model:{value:e.dateRangeSelectType,callback:function(t){e.dateRangeSelectType=t},expression:"dateRangeSelectType"}}),"last"===e.dateRangeSelectType?a("div",{staticClass:"row q-pa-md"},[e.advancedForLastFilter?e._e():a("q-select",{staticClass:"col-8",attrs:{options:e.dateRangeSelectTypeLasts,label:"Last","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please provide an input"}]},model:{value:e.dateRangeSelectTypeLast,callback:function(t){e.dateRangeSelectTypeLast=t},expression:"dateRangeSelectTypeLast"}}),e.advancedForLastFilter?a("div",{staticClass:"col-8"},[a("q-input",{attrs:{label:"Days",type:"number"},model:{value:e.days,callback:function(t){e.days=t},expression:"days"}}),a("q-input",{attrs:{label:"hours",type:"number"},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),a("q-input",{attrs:{label:"Minutes",type:"number"},model:{value:e.minutes,callback:function(t){e.minutes=t},expression:"minutes"}}),a("q-input",{attrs:{label:"Seconds",type:"number"},model:{value:e.seconds,callback:function(t){e.seconds=t},expression:"seconds"}})],1):e._e(),a("span",{staticClass:"float-right"},[a("q-list",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[e._v("Advanced")]),a("q-item-label",[a("q-toggle",{staticClass:"float-right",attrs:{color:"secondary"},model:{value:e.advancedForLastFilter,callback:function(t){e.advancedForLastFilter=t},expression:"advancedForLastFilter"}})],1)],1)],1)],1)],1):e._e()],1),a("div",{staticClass:"q-ma-none q-pa-none"},[a("q-radio",{attrs:{val:"timePeriod",label:"Time Period"},on:{input:e.dateRangeSelectTypeChanged},model:{value:e.dateRangeSelectType,callback:function(t){e.dateRangeSelectType=t},expression:"dateRangeSelectType"}}),"timePeriod"===e.dateRangeSelectType?a("div",{staticClass:"row q-pa-md"},[a("div",{staticClass:"row"},[a("q-input",{staticClass:"col-6",attrs:{mask:"date",label:"Date to",rules:["date",function(e){return e&&e.length>0||"Please enter a date"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,2882366464),model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}}),a("q-input",{staticClass:"col-6",attrs:{mask:"time",label:"Time to",rules:["time",function(e){return e&&e.length>0||"Please enter a time"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{"now-btn":""},model:{value:e.timeTo,callback:function(t){e.timeTo=t},expression:"timeTo"}})],1)],1)]},proxy:!0}],null,!1,789531335),model:{value:e.timeTo,callback:function(t){e.timeTo=t},expression:"timeTo"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"col-6",attrs:{mask:"date",label:"Date from",rules:["date",function(e){return e&&e.length>0||"Please enter a date"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{model:{value:e.dateFrom,callback:function(t){e.dateFrom=t},expression:"dateFrom"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1103465677),model:{value:e.dateFrom,callback:function(t){e.dateFrom=t},expression:"dateFrom"}}),a("q-input",{staticClass:"col-6",attrs:{mask:"time",label:"Time from",rules:["time",function(e){return e&&e.length>0||"Please enter a time"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"schedule"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{"now-btn":""},model:{value:e.timeFrom,callback:function(t){e.timeFrom=t},expression:"timeFrom"}})],1)],1)]},proxy:!0}],null,!1,94629418),model:{value:e.timeFrom,callback:function(t){e.timeFrom=t},expression:"timeFrom"}})],1)]):e._e()],1),a("div",[a("q-radio",{attrs:{val:"interval",label:"Interval"},on:{input:e.dateRangeSelectTypeChanged},model:{value:e.dateRangeSelectType,callback:function(t){e.dateRangeSelectType=t},expression:"dateRangeSelectType"}}),"interval"===e.dateRangeSelectType?a("div",{staticClass:"row q-pa-md"},[a("q-select",{staticClass:"col-12",attrs:{options:e.intervalTypes,label:"Last","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please provide an input"}]},model:{value:e.intervalType,callback:function(t){e.intervalType=t},expression:"intervalType"}})],1):e._e()],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:""},on:{click:e.cancel}},[e._v("Cancel")]),a("q-btn",{attrs:{color:"primary"},on:{click:e.update}},[e._v("Update")])],1)],1)],1)],1)}),r=[],c=(a("26e9"),{name:"dateTimeRange",props:["main","immediateMain","id"],components:{},async created(){this.immediateMain.dateTimeRanges||(this.immediateMain.dateTimeRanges={});let e=this.immediateMain.dateTimeRanges[this.id];e||(this.dateRangeSelectType="last",this.dateRangeSelectTypeLast="1 day"),this.oldDateRangeSelectType=this.dateRangeSelectType,this.convertToOtherTypes()},data(){return{dateFrom:"2021/01/04",timeFrom:"",dateTo:"",timeTo:"",days:1,hours:0,minutes:0,seconds:0,advancedForLastFilter:!1,dateRangeSelectType:"last",dateRangeSelectLabel:"...",intervalType:"Yesterday",intervalTypes:["Yesterday","Day before yesterday","This day last week","Previous week (Sun - Sat)","Previous week (Mon - Sun)","Previous month","Previous year","Current hour","Current day","Current day so far","Current week (Sun - Sat)","Current week (Mon - Sun)","Current week so far (Sun - Sat)","Current week so far (Mon - Sun)","Current month","Current month so far","Current year","Current year so far"],dateRangeSelectTypeLast:"1 day",dateRangeSelectTypeLasts:["1 second","5 seconds","10 seconds","15 seconds","30 seconds","1 minute","2 minutes","5 minutes","10 minutes","15 minutes","30 minutes","1 hour","2 hours","5 hours","10 hours","12 hours","1 day"]}},methods:{convertToOtherTypes(e){let t,a,i=e||this.dateRangeSelectType;switch(e||"last"===i&&this.advancedForLastFilter&&(i="lastAdvanced"),i){case"last":let e=parseInt(this.dateRangeSelectTypeLast),i=this.dateRangeSelectTypeLast.split(" ").slice(-1)[0].replace(/s$/,"");switch(a=e,i){case"second":break;case"minute":a*=60;break;case"hour":a*=3600;break;case"day":a*=86400;break}this.dateRangeSelectLabel=`Last ${this.dateRangeSelectTypeLast}`,this.interval={to:"now",from:-a};let s=0,n=parseInt(a/86400);s=n>0?a%(86400*n):a;let l=parseInt(s/3600);s=l>0?s%(3600*l):s;let o=parseInt(s/60);s=o>0?s%(60*o):s;let r=s;this.dateRangeSelectTypeLastAdvanced={day:n,hour:l,min:o,sec:r},console.log(n,l,o,r),this.days=n,this.hours=l,this.minutes=o,this.seconds=r,t=new Date,this.dateTo=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeTo=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`,t=new Date(t.getTime()-1e3*a),this.dateFrom=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeFrom=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`;break;case"lastAdvanced":a=24*parseInt(this.days)*60*60+60*parseInt(this.hours)*60+60*parseInt(this.minutes)+parseInt(this.seconds),t=new Date,this.dateTo=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeTo=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`,t=new Date(t.getTime()-1e3*a),this.dateFrom=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeFrom=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`;let c=[1,5,10,15,30,1,2,5,10,15,30,1,2,5,10,12,1],d=[1,60,3600,86400],m=-1;c=c.map((e=>(1===e&&m++,e*d[m])));let u=c[0],g=c[c.length-1];c.map((e=>{e<=a&&(u=e)})),c=c.reverse(),c.map((e=>{e>=a&&(g=e)})),c=c.reverse(),this.interval={to:"now",from:-a},a=a-u<g-a?u:g;let h=c.indexOf(a);this.dateRangeSelectTypeLast=this.dateRangeSelectTypeLasts[h];let p="";this.days>0&&(""===p&&(p="Last "),p+=`${this.days} day${this.days>1?"s":""} `),this.hours>0&&(""===p&&(p="Last "),p+=`${this.hours} hour${this.hours>1?"s":""} `),this.minutes>0&&(""===p&&(p="Last "),p+=`${this.minutes} minute${this.minutes>1?"s":""} `),this.seconds>0&&(""===p&&(p="Last "),p+=`${this.seconds} second${this.seconds>1?"s":""} `),this.dateRangeSelectLabel=p;break;case"timePeriod":this.interval={to:new Date(`${this.dateTo} ${this.timeTo}`),from:new Date(`${this.dateFrom} ${this.timeFrom}`)},this.dateRangeSelectLabel=`from ${this.dateFrom} ${this.timeFrom} to ${this.dateTo} ${this.timeTo}`;break;case"interval":const b=e=>{e=e||new Date;let t=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();return t};t=new Date;let y=b(),f=new Date(t.getTime()-60*t.getMinutes()*1e3-1e3*t.getSeconds()),v=new Date(f.getTime()+36e5),w=new Date(t.getTime()-1e3*y),q=new Date(w.getTime()+864e5),S=new Date(w.getTime()-864e5),k=new Date(S.getTime()-864e5),C=(new Date).getDay(),x=new Date(w.getTime()-24*C*60*60*1e3),z=new Date(x.getTime()+6048e5),T=new Date(x.getTime()-6048e5),O=new Date(x.getTime()+864e5),_=new Date(O.getTime()+6048e5),I=new Date(T.getTime()+864e5),F=new Date(w.getTime()-24*((new Date).getDate()-1)*60*60*1e3),A=new Date(F.getTime()-1e4),R=new Date(F.getTime()-24*A.getDate()*60*60*1e3),E=(A.getDate(),new Date((new Date).getFullYear(),0,0)),Q=b(E);E=new Date(E.getTime()-1e3*Q+864e5);let M=new Date(t.getFullYear()-1,0,0);Q=b(M),M=new Date(M.getTime()-1e3*Q+864e5);let N=new Date(t.getFullYear()+1,0,0);Q=b(N),N=new Date(N.getTime()-1e3*Q+864e5);let L=new Date(t.getFullYear(),t.getMonth()+1,0),D=b(L);switch(L=new Date(L.getTime()-1e3*D+864e5),console.log(x),console.log(k),console.log(T),console.log(O),console.log(F),console.log(A),console.log(R),console.log(E),console.log(M),console.log({beginningOfHour:f,endofHour:v,beginningOfToday:w,endOfToday:q,beginningOfNextMonth:L,beginningOfNextYear:N}),this.intervalType){case"Yesterday":this.interval={to:w,from:S};break;case"Day before yesterday":this.interval={to:S,from:S};break;case"This day last week":let e=new Date(w.getTime()-6048e5),t=new Date(e.getTime()+864e5);this.interval={to:t,from:e};break;case"Previous week (Sun - Sat)":this.interval={to:x,from:T};break;case"Previous week (Mon - Sun)":this.interval={to:O,from:I};break;case"Previous month":this.interval={to:F,from:R};break;case"Previous year":this.interval={to:E,from:M};break;case"Current hour":this.interval={to:v,from:f};break;case"Current day":this.interval={to:q,from:w};break;case"Current day so far":this.interval={to:"now",from:w};break;case"Current week (Sun - Sat)":this.interval={to:z,from:x};break;case"Current week (Mon - Sun)":this.interval={to:_,from:O};break;case"Current week so far (Sun - Sat)":this.interval={to:"now",from:x};break;case"Current week so far (Mon - Sun)":this.interval={to:"now",from:O};break;case"Current month":this.interval={to:L,from:F};break;case"Current month so far":this.interval={to:"now",from:F};break;case"Current year":this.interval={to:N,from:F};break;case"Current year so far":this.interval={to:"now",from:E};break}this.dateRangeSelectLabel=`${this.intervalType}`;let H=this.interval.from,P=this.interval.to;"now"===P&&(P=new Date),t=P,this.dateTo=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeTo=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`,t=H,this.dateFrom=`${t.getFullYear()}/${t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1}/${t.getDate()<10?"0"+t.getDate():t.getDate()}`,this.timeFrom=`${t.getHours()<10?"0"+t.getHours():t.getHours()}:${t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}`;break}},cancel(){this.$refs.menu0.toggle(),this.immediateMain.dateTimeRanges[this.id]=this.settingsOriginal},update(){this.convertToOtherTypes(!1),this.immediateMain.dateTimeRanges[this.id]||(this.immediateMain.dateTimeRanges[this.id]={});let e=["dateRangeSelectType","dateRangeSelectTypeLast","interval"];e.map((e=>this.immediateMain.dateTimeRanges[this.id][e]=this[e])),this.$refs.menu0.toggle(),this.immediateMain.dateTimeRanges[this.id].interval=this.interval,this.immediateMain.runSelected()},dateRangeSelectTypeChanged(e,t){this.convertToOtherTypes()}},computed:{},watch:{dateRangeSelectType(){let e=this.dateRangeSelectType;this.dateRangeSelectType=this.oldDateRangeSelectType,this.convertToOtherTypes(),this.dateRangeSelectType=e,this.oldDateRangeSelectType=e},advancedForLastFilter(){if(!1===this.advancedForLastFilter){let e=this.dateRangeSelectType;this.convertToOtherTypes("lastAdvanced"),this.dateRangeSelectType=e,this.oldDateRangeSelectType=e}else{let e=this.dateRangeSelectType;this.convertToOtherTypes("last"),this.dateRangeSelectType=e,this.oldDateRangeSelectType=e}}}}),d=c,m=a("2877"),u=a("9c40"),g=a("4e73"),h=a("f09f"),p=a("a370"),b=a("3786"),y=a("ddd8"),f=a("27f9"),v=a("1c1c"),w=a("4074"),q=a("0170"),S=a("9564"),k=a("0016"),C=a("7cbe"),x=a("52ee"),z=a("ca78"),T=a("4b7e"),O=a("7f67"),_=a("eebe"),I=a.n(_),F=Object(m["a"])(d,o,r,!1,null,null,null),A=F.exports;I()(F,"components",{QBtn:u["a"],QMenu:g["a"],QCard:h["a"],QCardSection:p["a"],QRadio:b["a"],QSelect:y["a"],QInput:f["a"],QList:v["a"],QItemSection:w["a"],QItemLabel:q["a"],QToggle:S["a"],QIcon:k["a"],QPopupProxy:C["a"],QDate:x["a"],QTime:z["a"],QCardActions:T["a"]}),I()(F,"directives",{ClosePopup:O["a"]});const R=a("1712").to,E=a("20e6"),Q=a("c2a1").default;var M={name:"logins",props:["main","immediateMain"],components:{dateTimeRange:A},async created(){Q.setSettings({TBURL:E["TB_URL"]}),Q.setVue(this),this.fetchLogins()},data(){return{id:1,myImmediateMain:this,dateTimeRanges:{},dateRangeSelectType:"last",dateRangeSelectLabel:"",selected:[],columns:[{name:"email",label:"Email",field:"email",sortable:!0},{name:"ip",label:"IP",field:"ip",sortable:!0},{name:"browser",label:"Browser",field:"browser",sortable:!0},{name:"os",label:"OS",field:"os",sortable:!0},{name:"platform",label:"Platform",field:"platform",sortable:!0},{name:"active",label:"Active",field:"active",sortable:!0},{name:"createdAt",label:"Created",field:"createdAt",sortable:!0}],allLogins:[],selectedRow:{},filter:""}},methods:{async logoutFromBtn(e){await this.logoutSelected([e])},async logoutSelected(e){return new Promise((async(t,a)=>{let i=!1,s=(e||this.selected).map((e=>e));s.map((e=>{e.isMe&&(i=!0)})),s=s.filter((e=>!e.isMe&&""!==e.token)),s=s.map((e=>e.token)),i&&this.$q.notify({type:"negative",message:"We will not log you out from here"});let n=s.map(Q.logout);this.main.loadingSomething=!0;let[l,o]=await R(Promise.all(n));if(this.main.loadingSomething=!1,l)return this.$q.notify({type:"negative",message:l.msg||l}),t(!1);await R(this.fetchLogins()),t()}))},async runSelected(){return this.fetchLogins()},async fetchLogins(){let e={};this.main.selectedRow&&(e={userId:this.main.selectedRow.userId}),this.dateTimeRanges[this.id]||(this.dateTimeRanges[this.id]={}),this.dateTimeRanges[this.id].interval&&(e.createdAt={},this.dateTimeRanges[this.id].interval.to&&("now"===this.dateTimeRanges[this.id].interval.to?e.createdAt["lte"]=new Date:e.createdAt["lte"]=this.dateTimeRanges[this.id].interval.to),this.dateTimeRanges[this.id].interval.from&&(this.dateTimeRanges[this.id].interval.from<0?e.createdAt["gte"]=new Date((new Date).getTime()+1e3*this.dateTimeRanges[this.id].interval.from):e.createdAt["gte"]=this.dateTimeRanges[this.id].interval.from)),"activeDevices"===this.immediateMain.tab&&(e["tokenExpiry"]={gte:parseInt((new Date).getTime()/1e3)},e["token"]={ne:""}),this.main.loadingSomething=!0;let[t,a]=await R(Q.getLogins(e));this.main.loadingSomething=!1;let i=Q.currentToken();t||(a=a.map((e=>(e.active=""!==e.token,e.token===i?e.isMe=!0:e.isMe=!1,e))),this.allLogins=a)},selectLogin(e,t){t.active&&(this.selectedRow=t)}},computed:{selectedRows(){let e=this.selected.filter((e=>e.active));return e.length>0}},watch:{selectedRow:{handler(e){JSON.stringify(this.selectedRow)!==JSON.stringify(this.main.selectedRow)?this.main.editted=!0:this.main.editted=!1},deep:!0}}},N=M,L=a("9989"),D=a("eaac"),H=a("db86"),P=a("b047"),$=Object(m["a"])(N,n,l,!1,null,null,null),B=$.exports;I()($,"components",{QPage:L["a"],QTable:D["a"],QBtn:u["a"],QMenu:g["a"],QCard:h["a"],QCardSection:p["a"],QRadio:b["a"],QCardActions:T["a"],QInput:f["a"],QIcon:k["a"],QTd:H["a"],QChip:P["a"]});a("20e6"),a("c2a1").default;var U={name:"auditLogs",props:["main"],components:{logins:B},async created(){let e,t,a=window.location.hash.replace(/^[#]*[\/]*/,""),i=a.match(/(audit_logs)\/([0-9a-z-]+)[\/]*([a-zA-Z]+)/);i&&"audit_logs"===i[1]&&(e=i[2],t=i[3]),e&&(this.selectedRow={userId:e}),t&&(this.tab=t)},data(){return{tab:"logins",immediateMain:this}},methods:{},computed:{},watch:{}},j=U,Y=a("429b"),Z=a("7460"),J=a("adad"),W=a("823b"),G=Object(m["a"])(j,i,s,!1,null,null,null);t["a"]=G.exports;I()(G,"components",{QPage:L["a"],QTabs:Y["a"],QTab:Z["a"],QTabPanels:J["a"],QTabPanel:W["a"]})},"853b":function(e,t,a){},"8a74":function(e){e.exports=JSON.parse('{"ORG":["ORG_USER"],"FACILITY":["FACILITY_ADMIN","FACILITY_USER"]}')},"948c":function(e,t,a){var i={"./adventhymnals/authorities.json":"a3db","./angelbot/authorities.json":"5d3b","./cysmed/authorities.json":"8a74","./gospelsounders/authorities.json":"a91a"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="948c"},"9a8c":function(e,t,a){},"9fea":function(e,t){function a(){return"\n## Terms and Conditions\n\n...\n    "}e.exports=a},a1f4:function(e,t,a){"use strict";a("c8d3")},a3db:function(e){e.exports=JSON.parse('{"ORG":["ORG_USER"],"FACILITY":["FACILITY_ADMIN","FACILITY_USER"]}')},a46f:function(e,t,a){},a852:function(e,t,a){"use strict";a("be06")},a91a:function(e){e.exports=JSON.parse('{"ORG":["ORG_USER"],"FACILITY":["FACILITY_ADMIN","FACILITY_USER"]}')},be06:function(e,t,a){},c36d:function(e){e.exports=JSON.parse('{"PROJECT":{"NAME":{"EN":"Gospel Sounders","SWA":"Gospel Sounders"}},"FIELDS":{"EMAIL":{"EN":"email","SWA":"anwani"}}}')},c8d3:function(e,t,a){},c94c:function(e){e.exports=JSON.parse('{"PROJECT":{"NAME":{"EN":"Angel Robotics","SWA":"Angel Robotics"}},"FIELDS":{"EMAIL":{"EN":"email","SWA":"anwani"}}}')},d47b:function(e,t,a){"use strict";a("a46f")},e591:function(e){e.exports=JSON.parse('{"PROJECT":{"NAME":{"EN":"CYSMED","SWA":"CYSMED"}},"FIELDS":{"EMAIL":{"EN":"email","SWA":"anwani"}}}')},ea76:function(e,t,a){"use strict";a.r(t);var i=a("9523"),s=a.n(i);a("5319");a("20e6").PROJECT.toLowerCase();class n{constructor(){s()(this,"translate",(e=>{let t=e.split("."),i=a("3ca2"),s=a("5bfc")(`./${this.projectName}/translations.json`),n="";try{if(!s[t[0]])throw"error";n=s[t[0]][t[1]]}catch(l){i[t[0]]&&(n=i[t[0]][t[1]])}if("object"===typeof n){let e=this.getShortLang();n=n[e]}return n})),this.init()}init(){this.projectName=a("20e6").PROJECT.toLowerCase(),this.defaultLang=(a("20e6").lang||"").toUpperCase()}getLangshort(e){}getLang(e){e=e||window.localStorage.getItem(this.langField)||this.defaultLang||"EN";let t=this.listLangs();function a(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}for(let i in t){let s=a(`(${e})`),n=t[i].match(s);if(n){e=t[i];break}}return e}getShortLang(e){e=e||window.localStorage.getItem(this.langField)||this.defaultLang||"EN";let t=this.listLangs();for(let a in t)if(t[a]===e){let t=e.match(/\([^\)]+/);e=t[0].replace(/\(/,"");break}return e}listLangs(){let e=a("1326"),t=[];for(let a in e)t.push(`${a} (${e[a]})`);return t}setLang(e){e=this.getShortLang(e),window.localStorage.setItem(this.langField,e)}}const l=new n;t["default"]=l},f392:function(e,t,a){"use strict";a.r(t);a("ddb0");let i={ORG:["ORG_ADMIN","ORG_USER"],FACILITY:["FACILITY_ADMIN","FACILITY_USER"]},s=a("20e6").PROJECT.toLowerCase();try{let e=a("948c")(`./${s}/authorities.json`);for(let t in e){let a=e[t].concat(i[t]);a=[...new Set(a)],i[t]=a}}catch(n){console.log(n)}t["default"]=i},f96e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loadedHymnals?a("q-page",{staticClass:"padding q-pa-md"},[e._l(e.hymnalsTree,(function(t,i){return a("q-tree",e._b({key:t.label,ref:"tree"+i,refInFor:!0,attrs:{nodes:t,"node-key":"label",selected:e.selectedKey,"tick-strategy":e.tickStrategy,ticked:e.ticked[i],expanded:e.expanded,"control-color":"secondary","selected-color":"secondary","text-color":"black",accordion:""},on:{"update:selected":[function(t){e.selectedKey=t},e.selectNode],"update:ticked":[function(t){return e.$set(e.ticked,i,t)},function(t){return e.changedTicked(i)}],"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"default-header",fn:function(t){return[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"text-weight-bold "},[e._v(e._s(t.node.label)+" "),e.getElem(e.adventHymnals.rawHymnalsObj[t.node.label],"year")||t.node.name&&"personalHymnal"===t.node.name?a("q-btn",{attrs:{icon:"play_circle_filled",round:"",color:"secondary",flat:""},on:{click:function(a){e.adventHymnals.selectHymnal(e.getElem(e.adventHymnals.rawHymnalsObj[t.node.label],"siteName")||e.getElem(e.adventHymnals.rawHymnalsObj[t.node.label],"name"))}}},[a("q-tooltip",[e._v("Click to open hymnal")])],1):e._e()],1)])]}},{key:"default-body",fn:function(t){return[t.node.name&&"personalHymnal"===t.node.name?a("span",{staticClass:"q-pa-md text-weight-light text-primary"},[e._v(e._s(t.node.description))]):e._e(),""!==e.getElem(e.adventHymnals.rawHymnalsObj[t.node.label],"year")?a("q-expansion-item",{staticClass:"text-weight-light text-primary bg-transparent",attrs:{dense:"","dense-toggle":"","expand-separator":"",label:t.node.longName}},[a("q-card",{staticClass:"bg-transparent"},[a("q-card-section",[a("q-markdown",{staticClass:"absolute-top"},[e._v("\n| | |\n|------| -----------|\n| Name|"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].name)+" |\n|Abbreviation|"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].abbvr)+" |\n| Year |"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].year)+" |\n| Language |"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].longLangName)+" |\n| Compiler |"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].compiler)+" |\n| No. Parts |"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].parts?Object.keys(e.adventHymnals.rawHymnalsObj[t.node.label].parts).length:"1")+" |\n| No. Songs |"+e._s(e.adventHymnals.rawHymnalsObj[t.node.label].parts?Object.values(e.adventHymnals.rawHymnalsObj[t.node.label].parts).map((function(e,t){return"Part "+(t+1)+"("+e.type+"): "+e.numSongs})).reduce((function(e,t){return e+(";"===e.slice(-1)[0]?"":"; ")+t+";"}))+"Total: "+Object.values(e.adventHymnals.rawHymnalsObj[t.node.label].parts).map((function(e,t){return parseInt(e.numSongs)})).reduce((function(e,t){return e+t})):e.adventHymnals.rawHymnalsObj[t.node.label].numSongs)+" |\n")])],1)],1)],1):e._e()]}}],null,!0)},"q-tree",e.hymnalsTree,!1))})),e.adventHymnals.hymnSidebar?a("hymnalRightSideBar",{attrs:{adventHymnals:e.adventHymnals}}):e._e()],2):e._e()},s=[],n=a("2a07"),l={name:"listHymnals",components:{hymnalRightSideBar:n["a"]},props:["adventHymnals","sideBarOpener"],data(){return{loadedHymnals:!1,seamless:!1,tab:"indices",filterSong:"",tabs:this.adventHymnals.hymnalActions,indexTab:"titles",hColumn:[{required:!0,name:"h",label:"Hymnal",sortable:!0,field:"h"}],titlesColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"title",required:!0,label:"Title",sortable:!0,field:"title",align:"left"},{name:"key",required:!0,label:"Key",sortable:!0,field:"key",align:"left"}],tunesColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"tune",required:!0,label:"Tune",sortable:!0,field:"tune",align:"left"},{name:"metrical",required:!0,label:"Metrical Pattern",sortable:!0,field:"metrical"}],poetColumns:[{name:"number",required:!0,label:"#",sortable:!0,field:"number",sort:(e,t)=>t-e},{name:"poet",required:!0,label:"Poet",sortable:!0,field:"poet",align:"left"},{name:"year",required:!0,label:"Year",sortable:!0,field:"year"}],selectedKey:"",hymnalsTree:{},selectedLanguages:{},selectedHymnals:{},ticked:{},expanded:[],tickStrategy:"leaf"}},async created(){this.hymnalsTree=this.adventHymnals.hymnalsTree,this.ticked=this.adventHymnals.ticked,this.selectedLanguages=this.adventHymnals.selectedLanguages,this.expanded=this.adventHymnals.expanded},watch:{"adventHymnals.loadedHymnals":{handler(e){this.loadedHymnals=!1,this.$nextTick((()=>this.loadedHymnals=!0))},deep:!0},"adventHymnals.expanded":{handler(e){this.expanded=this.adventHymnals.expanded},deep:!0},filterSong(e){this.adventHymnals.filterSong(e,this)}},methods:{getElem(e,t){let a="";try{a=e[t]}catch(i){}return a||""},selectNode(e,t){null!==e&&(this.selected=e);let a=e||this.selected,i=null!==e;for(let n in this.$refs.tree)try{i=this.$refs.tree[n].isTicked(a),this.$refs.tree[n].setTicked(a,!i)}catch(s){}},changedTicked(e){let t=`tree${e}`,a=this.$refs[t][0];t=a.nodes[0].label;let i=a.isExpanded(t);a.setExpanded(t,!i),a.setExpanded(t,i),this.adventHymnals.saveSelectedHymnals(this.ticked)},onExtend(e){},setFilter(e,t){this.filterSong=e,this.adventHymnals.filterBy=t}},computed:{rightSideBarSize(){return this.$q.screen.lt.xs||this.$q.screen.lt.sm||this.$q.screen.lt.md?document.getElementsByTagName("body")[0].clientWidth:.75*document.getElementsByTagName("body")[0].clientWidth},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},o=l,r=(a("66e6"),a("2877")),c=a("9989"),d=a("7f41"),m=a("9c40"),u=a("05c0"),g=a("3b73"),h=a("f09f"),p=a("a370"),b=a("eaac"),y=a("eebe"),f=a.n(y),v=Object(r["a"])(o,i,s,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QPage:c["a"],QTree:d["a"],QBtn:m["a"],QTooltip:u["a"],QExpansionItem:g["a"],QCard:h["a"],QCardSection:p["a"],QTable:b["a"]})}}]);